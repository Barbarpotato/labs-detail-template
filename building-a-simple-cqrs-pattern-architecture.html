<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="https://firebasestorage.googleapis.com/v0/b/personal-blog-darmajr.appspot.com/o/portofolio%2Fadmin%2FAvatar.svg?alt=media&amp;token=622405c3-9dff-4483-af0c-ddc95fbe6445"/><title>Building a Simple CQRS Pattern Architecture</title><meta name="description" content="In this lab we will implement simple CQRS architecture pattern using apache kafka as a message broker, elastic search as a search service and mysql database as a command service."/><meta property="og:title" content="Building a Simple CQRS Pattern Architecture"/><meta property="og:description" content="In this lab we will implement simple CQRS architecture pattern using apache kafka as a message broker, elastic search as a search service and mysql database as a command service."/><meta property="og:type" content="article"/><meta property="og:url" content="https://barbarpotato.github.io/labs/building-a-simple-cqrs-pattern-architecture"/><meta name="next-head-count" content="9"/><link rel="preload" href="/Labs-6b86b273ff34f/_next/static/css/5ca7847973650685.css" as="style"/><link rel="stylesheet" href="/Labs-6b86b273ff34f/_next/static/css/5ca7847973650685.css" data-n-g=""/><link rel="preload" href="/Labs-6b86b273ff34f/_next/static/css/fc94f74a8ede9696.css" as="style"/><link rel="stylesheet" href="/Labs-6b86b273ff34f/_next/static/css/fc94f74a8ede9696.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/Labs-6b86b273ff34f/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/Labs-6b86b273ff34f/_next/static/chunks/webpack-bf2aaf6a6c3711e7.js" defer=""></script><script src="/Labs-6b86b273ff34f/_next/static/chunks/framework-9620da855a94eb57.js" defer=""></script><script src="/Labs-6b86b273ff34f/_next/static/chunks/main-fdf10bf42093d7bc.js" defer=""></script><script src="/Labs-6b86b273ff34f/_next/static/chunks/pages/_app-1155349805004351.js" defer=""></script><script src="/Labs-6b86b273ff34f/_next/static/chunks/fea29d9f-b7078b2a3e565e53.js" defer=""></script><script src="/Labs-6b86b273ff34f/_next/static/chunks/2e3a845b-e90aee2522c723d3.js" defer=""></script><script src="/Labs-6b86b273ff34f/_next/static/chunks/24-e31be155779d178d.js" defer=""></script><script src="/Labs-6b86b273ff34f/_next/static/chunks/pages/%5Bslug%5D-d7c9042abb7dc0e3.js" defer=""></script><script src="/Labs-6b86b273ff34f/_next/static/ueq4AGs-hW0ySdlZenHDR/_buildManifest.js" defer=""></script><script src="/Labs-6b86b273ff34f/_next/static/ueq4AGs-hW0ySdlZenHDR/_ssgManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css-global 1b7scut">:host,:root,[data-theme]{--chakra-ring-inset:var(--chakra-empty,/*!*/ /*!*/);--chakra-ring-offset-width:0px;--chakra-ring-offset-color:#fff;--chakra-ring-color:rgba(66, 153, 225, 0.6);--chakra-ring-offset-shadow:0 0 #0000;--chakra-ring-shadow:0 0 #0000;--chakra-space-x-reverse:0;--chakra-space-y-reverse:0;--chakra-colors-transparent:transparent;--chakra-colors-current:currentColor;--chakra-colors-black:#000000;--chakra-colors-white:#FFFFFF;--chakra-colors-whiteAlpha-50:rgba(255, 255, 255, 0.04);--chakra-colors-whiteAlpha-100:rgba(255, 255, 255, 0.06);--chakra-colors-whiteAlpha-200:rgba(255, 255, 255, 0.08);--chakra-colors-whiteAlpha-300:rgba(255, 255, 255, 0.16);--chakra-colors-whiteAlpha-400:rgba(255, 255, 255, 0.24);--chakra-colors-whiteAlpha-500:rgba(255, 255, 255, 0.36);--chakra-colors-whiteAlpha-600:rgba(255, 255, 255, 0.48);--chakra-colors-whiteAlpha-700:rgba(255, 255, 255, 0.64);--chakra-colors-whiteAlpha-800:rgba(255, 255, 255, 0.80);--chakra-colors-whiteAlpha-900:rgba(255, 255, 255, 0.92);--chakra-colors-blackAlpha-50:rgba(0, 0, 0, 0.04);--chakra-colors-blackAlpha-100:rgba(0, 0, 0, 0.06);--chakra-colors-blackAlpha-200:rgba(0, 0, 0, 0.08);--chakra-colors-blackAlpha-300:rgba(0, 0, 0, 0.16);--chakra-colors-blackAlpha-400:rgba(0, 0, 0, 0.24);--chakra-colors-blackAlpha-500:rgba(0, 0, 0, 0.36);--chakra-colors-blackAlpha-600:rgba(0, 0, 0, 0.48);--chakra-colors-blackAlpha-700:rgba(0, 0, 0, 0.64);--chakra-colors-blackAlpha-800:rgba(0, 0, 0, 0.80);--chakra-colors-blackAlpha-900:rgba(0, 0, 0, 0.92);--chakra-colors-gray-50:#F7FAFC;--chakra-colors-gray-100:#EDF2F7;--chakra-colors-gray-200:#E2E8F0;--chakra-colors-gray-300:#CBD5E0;--chakra-colors-gray-400:#A0AEC0;--chakra-colors-gray-500:#718096;--chakra-colors-gray-600:#4A5568;--chakra-colors-gray-700:#2D3748;--chakra-colors-gray-800:#1A202C;--chakra-colors-gray-900:#171923;--chakra-colors-red-50:#FFF5F5;--chakra-colors-red-100:#FED7D7;--chakra-colors-red-200:#FEB2B2;--chakra-colors-red-300:#FC8181;--chakra-colors-red-400:#F56565;--chakra-colors-red-500:#E53E3E;--chakra-colors-red-600:#C53030;--chakra-colors-red-700:#9B2C2C;--chakra-colors-red-800:#822727;--chakra-colors-red-900:#63171B;--chakra-colors-orange-50:#FFFAF0;--chakra-colors-orange-100:#FEEBC8;--chakra-colors-orange-200:#FBD38D;--chakra-colors-orange-300:#F6AD55;--chakra-colors-orange-400:#ED8936;--chakra-colors-orange-500:#DD6B20;--chakra-colors-orange-600:#C05621;--chakra-colors-orange-700:#9C4221;--chakra-colors-orange-800:#7B341E;--chakra-colors-orange-900:#652B19;--chakra-colors-yellow-50:#FFFFF0;--chakra-colors-yellow-100:#FEFCBF;--chakra-colors-yellow-200:#FAF089;--chakra-colors-yellow-300:#F6E05E;--chakra-colors-yellow-400:#ECC94B;--chakra-colors-yellow-500:#D69E2E;--chakra-colors-yellow-600:#B7791F;--chakra-colors-yellow-700:#975A16;--chakra-colors-yellow-800:#744210;--chakra-colors-yellow-900:#5F370E;--chakra-colors-green-50:#F0FFF4;--chakra-colors-green-100:#C6F6D5;--chakra-colors-green-200:#9AE6B4;--chakra-colors-green-300:#68D391;--chakra-colors-green-400:#48BB78;--chakra-colors-green-500:#38A169;--chakra-colors-green-600:#2F855A;--chakra-colors-green-700:#276749;--chakra-colors-green-800:#22543D;--chakra-colors-green-900:#1C4532;--chakra-colors-teal-50:#E6FFFA;--chakra-colors-teal-100:#B2F5EA;--chakra-colors-teal-200:#81E6D9;--chakra-colors-teal-300:#4FD1C5;--chakra-colors-teal-400:#38B2AC;--chakra-colors-teal-500:#319795;--chakra-colors-teal-600:#2C7A7B;--chakra-colors-teal-700:#285E61;--chakra-colors-teal-800:#234E52;--chakra-colors-teal-900:#1D4044;--chakra-colors-blue-50:#ebf8ff;--chakra-colors-blue-100:#bee3f8;--chakra-colors-blue-200:#90cdf4;--chakra-colors-blue-300:#63b3ed;--chakra-colors-blue-400:#4299e1;--chakra-colors-blue-500:#3182ce;--chakra-colors-blue-600:#2b6cb0;--chakra-colors-blue-700:#2c5282;--chakra-colors-blue-800:#2a4365;--chakra-colors-blue-900:#1A365D;--chakra-colors-cyan-50:#EDFDFD;--chakra-colors-cyan-100:#C4F1F9;--chakra-colors-cyan-200:#9DECF9;--chakra-colors-cyan-300:#76E4F7;--chakra-colors-cyan-400:#0BC5EA;--chakra-colors-cyan-500:#00B5D8;--chakra-colors-cyan-600:#00A3C4;--chakra-colors-cyan-700:#0987A0;--chakra-colors-cyan-800:#086F83;--chakra-colors-cyan-900:#065666;--chakra-colors-purple-50:#FAF5FF;--chakra-colors-purple-100:#E9D8FD;--chakra-colors-purple-200:#D6BCFA;--chakra-colors-purple-300:#B794F4;--chakra-colors-purple-400:#9F7AEA;--chakra-colors-purple-500:#805AD5;--chakra-colors-purple-600:#6B46C1;--chakra-colors-purple-700:#553C9A;--chakra-colors-purple-800:#44337A;--chakra-colors-purple-900:#322659;--chakra-colors-pink-50:#FFF5F7;--chakra-colors-pink-100:#FED7E2;--chakra-colors-pink-200:#FBB6CE;--chakra-colors-pink-300:#F687B3;--chakra-colors-pink-400:#ED64A6;--chakra-colors-pink-500:#D53F8C;--chakra-colors-pink-600:#B83280;--chakra-colors-pink-700:#97266D;--chakra-colors-pink-800:#702459;--chakra-colors-pink-900:#521B41;--chakra-colors-linkedin-50:#E8F4F9;--chakra-colors-linkedin-100:#CFEDFB;--chakra-colors-linkedin-200:#9BDAF3;--chakra-colors-linkedin-300:#68C7EC;--chakra-colors-linkedin-400:#34B3E4;--chakra-colors-linkedin-500:#00A0DC;--chakra-colors-linkedin-600:#008CC9;--chakra-colors-linkedin-700:#0077B5;--chakra-colors-linkedin-800:#005E93;--chakra-colors-linkedin-900:#004471;--chakra-colors-facebook-50:#E8F4F9;--chakra-colors-facebook-100:#D9DEE9;--chakra-colors-facebook-200:#B7C2DA;--chakra-colors-facebook-300:#6482C0;--chakra-colors-facebook-400:#4267B2;--chakra-colors-facebook-500:#385898;--chakra-colors-facebook-600:#314E89;--chakra-colors-facebook-700:#29487D;--chakra-colors-facebook-800:#223B67;--chakra-colors-facebook-900:#1E355B;--chakra-colors-messenger-50:#D0E6FF;--chakra-colors-messenger-100:#B9DAFF;--chakra-colors-messenger-200:#A2CDFF;--chakra-colors-messenger-300:#7AB8FF;--chakra-colors-messenger-400:#2E90FF;--chakra-colors-messenger-500:#0078FF;--chakra-colors-messenger-600:#0063D1;--chakra-colors-messenger-700:#0052AC;--chakra-colors-messenger-800:#003C7E;--chakra-colors-messenger-900:#002C5C;--chakra-colors-whatsapp-50:#dffeec;--chakra-colors-whatsapp-100:#b9f5d0;--chakra-colors-whatsapp-200:#90edb3;--chakra-colors-whatsapp-300:#65e495;--chakra-colors-whatsapp-400:#3cdd78;--chakra-colors-whatsapp-500:#22c35e;--chakra-colors-whatsapp-600:#179848;--chakra-colors-whatsapp-700:#0c6c33;--chakra-colors-whatsapp-800:#01421c;--chakra-colors-whatsapp-900:#001803;--chakra-colors-twitter-50:#E5F4FD;--chakra-colors-twitter-100:#C8E9FB;--chakra-colors-twitter-200:#A8DCFA;--chakra-colors-twitter-300:#83CDF7;--chakra-colors-twitter-400:#57BBF5;--chakra-colors-twitter-500:#1DA1F2;--chakra-colors-twitter-600:#1A94DA;--chakra-colors-twitter-700:#1681BF;--chakra-colors-twitter-800:#136B9E;--chakra-colors-twitter-900:#0D4D71;--chakra-colors-telegram-50:#E3F2F9;--chakra-colors-telegram-100:#C5E4F3;--chakra-colors-telegram-200:#A2D4EC;--chakra-colors-telegram-300:#7AC1E4;--chakra-colors-telegram-400:#47A9DA;--chakra-colors-telegram-500:#0088CC;--chakra-colors-telegram-600:#007AB8;--chakra-colors-telegram-700:#006BA1;--chakra-colors-telegram-800:#005885;--chakra-colors-telegram-900:#003F5E;--chakra-borders-none:0;--chakra-borders-1px:1px solid;--chakra-borders-2px:2px solid;--chakra-borders-4px:4px solid;--chakra-borders-8px:8px solid;--chakra-fonts-heading:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--chakra-fonts-body:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--chakra-fonts-mono:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--chakra-fontSizes-3xs:0.45rem;--chakra-fontSizes-2xs:0.625rem;--chakra-fontSizes-xs:0.75rem;--chakra-fontSizes-sm:0.875rem;--chakra-fontSizes-md:1rem;--chakra-fontSizes-lg:1.125rem;--chakra-fontSizes-xl:1.25rem;--chakra-fontSizes-2xl:1.5rem;--chakra-fontSizes-3xl:1.875rem;--chakra-fontSizes-4xl:2.25rem;--chakra-fontSizes-5xl:3rem;--chakra-fontSizes-6xl:3.75rem;--chakra-fontSizes-7xl:4.5rem;--chakra-fontSizes-8xl:6rem;--chakra-fontSizes-9xl:8rem;--chakra-fontWeights-hairline:100;--chakra-fontWeights-thin:200;--chakra-fontWeights-light:300;--chakra-fontWeights-normal:400;--chakra-fontWeights-medium:500;--chakra-fontWeights-semibold:600;--chakra-fontWeights-bold:700;--chakra-fontWeights-extrabold:800;--chakra-fontWeights-black:900;--chakra-letterSpacings-tighter:-0.05em;--chakra-letterSpacings-tight:-0.025em;--chakra-letterSpacings-normal:0;--chakra-letterSpacings-wide:0.025em;--chakra-letterSpacings-wider:0.05em;--chakra-letterSpacings-widest:0.1em;--chakra-lineHeights-3:.75rem;--chakra-lineHeights-4:1rem;--chakra-lineHeights-5:1.25rem;--chakra-lineHeights-6:1.5rem;--chakra-lineHeights-7:1.75rem;--chakra-lineHeights-8:2rem;--chakra-lineHeights-9:2.25rem;--chakra-lineHeights-10:2.5rem;--chakra-lineHeights-normal:normal;--chakra-lineHeights-none:1;--chakra-lineHeights-shorter:1.25;--chakra-lineHeights-short:1.375;--chakra-lineHeights-base:1.5;--chakra-lineHeights-tall:1.625;--chakra-lineHeights-taller:2;--chakra-radii-none:0;--chakra-radii-sm:0.125rem;--chakra-radii-base:0.25rem;--chakra-radii-md:0.375rem;--chakra-radii-lg:0.5rem;--chakra-radii-xl:0.75rem;--chakra-radii-2xl:1rem;--chakra-radii-3xl:1.5rem;--chakra-radii-full:9999px;--chakra-space-1:0.25rem;--chakra-space-2:0.5rem;--chakra-space-3:0.75rem;--chakra-space-4:1rem;--chakra-space-5:1.25rem;--chakra-space-6:1.5rem;--chakra-space-7:1.75rem;--chakra-space-8:2rem;--chakra-space-9:2.25rem;--chakra-space-10:2.5rem;--chakra-space-12:3rem;--chakra-space-14:3.5rem;--chakra-space-16:4rem;--chakra-space-20:5rem;--chakra-space-24:6rem;--chakra-space-28:7rem;--chakra-space-32:8rem;--chakra-space-36:9rem;--chakra-space-40:10rem;--chakra-space-44:11rem;--chakra-space-48:12rem;--chakra-space-52:13rem;--chakra-space-56:14rem;--chakra-space-60:15rem;--chakra-space-64:16rem;--chakra-space-72:18rem;--chakra-space-80:20rem;--chakra-space-96:24rem;--chakra-space-px:1px;--chakra-space-0-5:0.125rem;--chakra-space-1-5:0.375rem;--chakra-space-2-5:0.625rem;--chakra-space-3-5:0.875rem;--chakra-shadows-xs:0 0 0 1px rgba(0, 0, 0, 0.05);--chakra-shadows-sm:0 1px 2px 0 rgba(0, 0, 0, 0.05);--chakra-shadows-base:0 1px 3px 0 rgba(0, 0, 0, 0.1),0 1px 2px 0 rgba(0, 0, 0, 0.06);--chakra-shadows-md:0 4px 6px -1px rgba(0, 0, 0, 0.1),0 2px 4px -1px rgba(0, 0, 0, 0.06);--chakra-shadows-lg:0 10px 15px -3px rgba(0, 0, 0, 0.1),0 4px 6px -2px rgba(0, 0, 0, 0.05);--chakra-shadows-xl:0 20px 25px -5px rgba(0, 0, 0, 0.1),0 10px 10px -5px rgba(0, 0, 0, 0.04);--chakra-shadows-2xl:0 25px 50px -12px rgba(0, 0, 0, 0.25);--chakra-shadows-outline:0 0 0 3px rgba(66, 153, 225, 0.6);--chakra-shadows-inner:inset 0 2px 4px 0 rgba(0,0,0,0.06);--chakra-shadows-none:none;--chakra-shadows-dark-lg:rgba(0, 0, 0, 0.1) 0px 0px 0px 1px,rgba(0, 0, 0, 0.2) 0px 5px 10px,rgba(0, 0, 0, 0.4) 0px 15px 40px;--chakra-sizes-1:0.25rem;--chakra-sizes-2:0.5rem;--chakra-sizes-3:0.75rem;--chakra-sizes-4:1rem;--chakra-sizes-5:1.25rem;--chakra-sizes-6:1.5rem;--chakra-sizes-7:1.75rem;--chakra-sizes-8:2rem;--chakra-sizes-9:2.25rem;--chakra-sizes-10:2.5rem;--chakra-sizes-12:3rem;--chakra-sizes-14:3.5rem;--chakra-sizes-16:4rem;--chakra-sizes-20:5rem;--chakra-sizes-24:6rem;--chakra-sizes-28:7rem;--chakra-sizes-32:8rem;--chakra-sizes-36:9rem;--chakra-sizes-40:10rem;--chakra-sizes-44:11rem;--chakra-sizes-48:12rem;--chakra-sizes-52:13rem;--chakra-sizes-56:14rem;--chakra-sizes-60:15rem;--chakra-sizes-64:16rem;--chakra-sizes-72:18rem;--chakra-sizes-80:20rem;--chakra-sizes-96:24rem;--chakra-sizes-px:1px;--chakra-sizes-0-5:0.125rem;--chakra-sizes-1-5:0.375rem;--chakra-sizes-2-5:0.625rem;--chakra-sizes-3-5:0.875rem;--chakra-sizes-max:max-content;--chakra-sizes-min:min-content;--chakra-sizes-full:100%;--chakra-sizes-3xs:14rem;--chakra-sizes-2xs:16rem;--chakra-sizes-xs:20rem;--chakra-sizes-sm:24rem;--chakra-sizes-md:28rem;--chakra-sizes-lg:32rem;--chakra-sizes-xl:36rem;--chakra-sizes-2xl:42rem;--chakra-sizes-3xl:48rem;--chakra-sizes-4xl:56rem;--chakra-sizes-5xl:64rem;--chakra-sizes-6xl:72rem;--chakra-sizes-7xl:80rem;--chakra-sizes-8xl:90rem;--chakra-sizes-prose:60ch;--chakra-sizes-container-sm:640px;--chakra-sizes-container-md:768px;--chakra-sizes-container-lg:1024px;--chakra-sizes-container-xl:1280px;--chakra-zIndices-hide:-1;--chakra-zIndices-auto:auto;--chakra-zIndices-base:0;--chakra-zIndices-docked:10;--chakra-zIndices-dropdown:1000;--chakra-zIndices-sticky:1100;--chakra-zIndices-banner:1200;--chakra-zIndices-overlay:1300;--chakra-zIndices-modal:1400;--chakra-zIndices-popover:1500;--chakra-zIndices-skipLink:1600;--chakra-zIndices-toast:1700;--chakra-zIndices-tooltip:1800;--chakra-transition-property-common:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;--chakra-transition-property-colors:background-color,border-color,color,fill,stroke;--chakra-transition-property-dimensions:width,height;--chakra-transition-property-position:left,right,top,bottom;--chakra-transition-property-background:background-color,background-image,background-position;--chakra-transition-easing-ease-in:cubic-bezier(0.4, 0, 1, 1);--chakra-transition-easing-ease-out:cubic-bezier(0, 0, 0.2, 1);--chakra-transition-easing-ease-in-out:cubic-bezier(0.4, 0, 0.2, 1);--chakra-transition-duration-ultra-fast:50ms;--chakra-transition-duration-faster:100ms;--chakra-transition-duration-fast:150ms;--chakra-transition-duration-normal:200ms;--chakra-transition-duration-slow:300ms;--chakra-transition-duration-slower:400ms;--chakra-transition-duration-ultra-slow:500ms;--chakra-blur-none:0;--chakra-blur-sm:4px;--chakra-blur-base:8px;--chakra-blur-md:12px;--chakra-blur-lg:16px;--chakra-blur-xl:24px;--chakra-blur-2xl:40px;--chakra-blur-3xl:64px;--chakra-breakpoints-base:0em;--chakra-breakpoints-sm:30em;--chakra-breakpoints-md:48em;--chakra-breakpoints-lg:62em;--chakra-breakpoints-xl:80em;--chakra-breakpoints-2xl:96em;}.chakra-ui-light :host:not([data-theme]),.chakra-ui-light :root:not([data-theme]),.chakra-ui-light [data-theme]:not([data-theme]),[data-theme=light] :host:not([data-theme]),[data-theme=light] :root:not([data-theme]),[data-theme=light] [data-theme]:not([data-theme]),:host[data-theme=light],:root[data-theme=light],[data-theme][data-theme=light]{--chakra-colors-chakra-body-text:var(--chakra-colors-gray-800);--chakra-colors-chakra-body-bg:var(--chakra-colors-white);--chakra-colors-chakra-border-color:var(--chakra-colors-gray-200);--chakra-colors-chakra-inverse-text:var(--chakra-colors-white);--chakra-colors-chakra-subtle-bg:var(--chakra-colors-gray-100);--chakra-colors-chakra-subtle-text:var(--chakra-colors-gray-600);--chakra-colors-chakra-placeholder-color:var(--chakra-colors-gray-500);}.chakra-ui-dark :host:not([data-theme]),.chakra-ui-dark :root:not([data-theme]),.chakra-ui-dark [data-theme]:not([data-theme]),[data-theme=dark] :host:not([data-theme]),[data-theme=dark] :root:not([data-theme]),[data-theme=dark] [data-theme]:not([data-theme]),:host[data-theme=dark],:root[data-theme=dark],[data-theme][data-theme=dark]{--chakra-colors-chakra-body-text:var(--chakra-colors-whiteAlpha-900);--chakra-colors-chakra-body-bg:var(--chakra-colors-gray-800);--chakra-colors-chakra-border-color:var(--chakra-colors-whiteAlpha-300);--chakra-colors-chakra-inverse-text:var(--chakra-colors-gray-800);--chakra-colors-chakra-subtle-bg:var(--chakra-colors-gray-700);--chakra-colors-chakra-subtle-text:var(--chakra-colors-gray-400);--chakra-colors-chakra-placeholder-color:var(--chakra-colors-whiteAlpha-400);}</style><style data-emotion="css-global fubdgu">html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:system-ui,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;touch-action:manipulation;}body{position:relative;min-height:100%;margin:0;font-feature-settings:"kern";}:where(*, *::before, *::after){border-width:0;border-style:solid;box-sizing:border-box;word-wrap:break-word;}main{display:block;}hr{border-top-width:1px;box-sizing:content-box;height:0;overflow:visible;}:where(pre, code, kbd,samp){font-family:SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:1em;}a{background-color:transparent;color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}:where(b, strong){font-weight:bold;}small{font-size:80%;}:where(sub,sup){font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}:where(button, input, optgroup, select, textarea){font-family:inherit;font-size:100%;line-height:1.15;margin:0;}:where(button, input){overflow:visible;}:where(button, select){text-transform:none;}:where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ){border-style:none;padding:0;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}:where([type="checkbox"], [type="radio"]){box-sizing:border-box;padding:0;}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none!important;}input[type="number"]{-moz-appearance:textfield;}input[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}input[type="search"]::-webkit-search-decoration{-webkit-appearance:none!important;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}template{display:none;}[hidden]{display:none!important;}:where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ){margin:0;}button{background:transparent;padding:0;}fieldset{margin:0;padding:0;}:where(ol, ul){margin:0;padding:0;}textarea{resize:vertical;}:where(button, [role="button"]){cursor:pointer;}button::-moz-focus-inner{border:0!important;}table{border-collapse:collapse;}:where(h1, h2, h3, h4, h5, h6){font-size:inherit;font-weight:inherit;}:where(button, input, optgroup, select, textarea){padding:0;line-height:inherit;color:inherit;}:where(img, svg, video, canvas, audio, iframe, embed, object){display:block;}:where(img, video){max-width:100%;height:auto;}[data-js-focus-visible] :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ){outline:none;box-shadow:none;}select::-ms-expand{display:none;}:root,:host{--chakra-vh:100vh;}@supports (height: -webkit-fill-available){:root,:host{--chakra-vh:-webkit-fill-available;}}@supports (height: -moz-fill-available){:root,:host{--chakra-vh:-moz-fill-available;}}@supports (height: 100dvh){:root,:host{--chakra-vh:100dvh;}}</style><style data-emotion="css-global 1cgn62j">body{font-family:var(--chakra-fonts-body);color:var(--chakra-colors-chakra-body-text);background:var(--chakra-colors-chakra-body-bg);transition-property:background-color;transition-duration:var(--chakra-transition-duration-normal);line-height:var(--chakra-lineHeights-base);}*::-webkit-input-placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*::-moz-placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*:-ms-input-placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*::placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*,*::before,::after{border-color:var(--chakra-colors-chakra-border-color);}</style><style data-emotion="css 65bb5v">.css-65bb5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:#292b37;padding:var(--chakra-space-5);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;z-index:30;}</style><div id="navigation" class="css-65bb5v"><style data-emotion="css 1diqifa">.css-1diqifa{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:var(--chakra-space-2);}</style><div class="css-1diqifa"><style data-emotion="css wed4oc">.css-wed4oc{font-family:var(--chakra-fonts-heading);font-weight:var(--chakra-fontWeights-bold);line-height:1.33;font-size:var(--chakra-fontSizes-2xl);color:#faf9ff;}@media screen and (min-width: 48em){.css-wed4oc{line-height:1.2;}}</style><h2 class="chakra-heading css-wed4oc"><span style="color:#bd93f9;font-weight:bold">🚀D</span>armawan</h2></div><style data-emotion="css 188520a">.css-188520a{display:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;gap:var(--chakra-space-4);}@media screen and (min-width: 62em){.css-188520a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><div class="chakra-stack css-188520a"><style data-emotion="css d0k7in">.css-d0k7in{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-10);min-width:var(--chakra-sizes-10);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);background:var(--chakra-colors-purple-500);color:#faf9ff;border-radius:var(--chakra-radii-md);font-weight:var(--chakra-fontWeights-bold);padding:var(--chakra-space-4);}.css-d0k7in:focus-visible,.css-d0k7in[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-d0k7in:disabled,.css-d0k7in[disabled],.css-d0k7in[aria-disabled=true],.css-d0k7in[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-d0k7in:hover,.css-d0k7in[data-hover]{background:#bd93f9;-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);-webkit-transition:-webkit-transform 0.2s ease-in-out;transition:transform 0.2s ease-in-out;}.css-d0k7in:active,.css-d0k7in[data-active]{background:#bd93f9;-webkit-transform:scale(0.95);-moz-transform:scale(0.95);-ms-transform:scale(0.95);transform:scale(0.95);}</style><button type="button" class="chakra-button css-d0k7in">Home</button><style data-emotion="css 1p1n4yl">.css-1p1n4yl{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-10);min-width:var(--chakra-sizes-10);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);background:var(--chakra-colors-transparent);color:#faf9ff;border-radius:var(--chakra-radii-md);font-weight:var(--chakra-fontWeights-normal);padding:var(--chakra-space-4);}.css-1p1n4yl:focus-visible,.css-1p1n4yl[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-1p1n4yl:disabled,.css-1p1n4yl[disabled],.css-1p1n4yl[aria-disabled=true],.css-1p1n4yl[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-1p1n4yl:hover,.css-1p1n4yl[data-hover]{background:#6b46c1;-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);-webkit-transition:-webkit-transform 0.2s ease-in-out;transition:transform 0.2s ease-in-out;}.css-1p1n4yl:active,.css-1p1n4yl[data-active]{background:#6b46c1;-webkit-transform:scale(0.95);-moz-transform:scale(0.95);-ms-transform:scale(0.95);transform:scale(0.95);}</style><button type="button" class="chakra-button css-1p1n4yl">About</button><button type="button" class="chakra-button css-1p1n4yl">Labs</button><button type="button" class="chakra-button css-1p1n4yl">Projects</button><button type="button" class="chakra-button css-1p1n4yl">Experiences</button><button type="button" class="chakra-button css-1p1n4yl">Badges</button></div><style data-emotion="css oebpya">.css-oebpya{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--chakra-radii-md);font-weight:var(--chakra-fontWeights-semibold);transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-10);min-width:var(--chakra-sizes-10);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);padding:0px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;color:#faf9ff;}.css-oebpya:focus-visible,.css-oebpya[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-oebpya:disabled,.css-oebpya[disabled],.css-oebpya[aria-disabled=true],.css-oebpya[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-oebpya:hover,.css-oebpya[data-hover]{background:var(--chakra-colors-gray-100);}.css-oebpya:hover:disabled,.css-oebpya[data-hover]:disabled,.css-oebpya:hover[disabled],.css-oebpya[data-hover][disabled],.css-oebpya:hover[aria-disabled=true],.css-oebpya[data-hover][aria-disabled=true],.css-oebpya:hover[data-disabled],.css-oebpya[data-hover][data-disabled]{background:initial;}.css-oebpya:active,.css-oebpya[data-active]{background:var(--chakra-colors-gray-200);}@media screen and (min-width: 62em){.css-oebpya{display:none;}}</style><button type="button" class="chakra-button css-oebpya" aria-label="Toggle menu"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" aria-hidden="true" focusable="false" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"></path></svg></button></div><div class="chakra-collapse" style="overflow:hidden;display:none;opacity:0;height:0px"><style data-emotion="css bsnx1g">.css-bsnx1g{position:absolute;top:72px;width:100%;z-index:20;background:#292b37;color:#faf9ff;-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);padding-bottom:var(--chakra-space-4);}@media screen and (min-width: 62em){.css-bsnx1g{display:none;}}</style><div class="css-bsnx1g"><style data-emotion="css nf2ztb">.css-nf2ztb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--chakra-space-1);}</style><div class="chakra-stack css-nf2ztb"><style data-emotion="css 121udnp">.css-121udnp{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-10);min-width:var(--chakra-sizes-10);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);background:var(--chakra-colors-purple-500);-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;color:var(--chakra-colors-white);border-radius:var(--chakra-radii-md);font-weight:var(--chakra-fontWeights-bold);width:var(--chakra-sizes-full);}.css-121udnp:focus-visible,.css-121udnp[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-121udnp:disabled,.css-121udnp[disabled],.css-121udnp[aria-disabled=true],.css-121udnp[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-121udnp:hover,.css-121udnp[data-hover]{background:var(--chakra-colors-purple-600);}.css-121udnp:hover:disabled,.css-121udnp[data-hover]:disabled,.css-121udnp:hover[disabled],.css-121udnp[data-hover][disabled],.css-121udnp:hover[aria-disabled=true],.css-121udnp[data-hover][aria-disabled=true],.css-121udnp:hover[data-disabled],.css-121udnp[data-hover][data-disabled]{background:var(--chakra-colors-purple-500);}.css-121udnp:active,.css-121udnp[data-active]{background:var(--chakra-colors-purple-700);}</style><button type="button" class="chakra-button css-121udnp">Home</button><style data-emotion="css 1e9rbwc">.css-1e9rbwc{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-10);min-width:var(--chakra-sizes-10);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);background:var(--chakra-colors-transparent);-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;color:var(--chakra-colors-white);border-radius:var(--chakra-radii-md);font-weight:var(--chakra-fontWeights-normal);width:var(--chakra-sizes-full);}.css-1e9rbwc:focus-visible,.css-1e9rbwc[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-1e9rbwc:disabled,.css-1e9rbwc[disabled],.css-1e9rbwc[aria-disabled=true],.css-1e9rbwc[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-1e9rbwc:hover,.css-1e9rbwc[data-hover]{background:var(--chakra-colors-purple-50);}.css-1e9rbwc:hover:disabled,.css-1e9rbwc[data-hover]:disabled,.css-1e9rbwc:hover[disabled],.css-1e9rbwc[data-hover][disabled],.css-1e9rbwc:hover[aria-disabled=true],.css-1e9rbwc[data-hover][aria-disabled=true],.css-1e9rbwc:hover[data-disabled],.css-1e9rbwc[data-hover][data-disabled]{background:initial;}.css-1e9rbwc:active,.css-1e9rbwc[data-active]{background:var(--chakra-colors-purple-100);}</style><button type="button" class="chakra-button css-1e9rbwc">About</button><button type="button" class="chakra-button css-1e9rbwc">Labs</button><button type="button" class="chakra-button css-1e9rbwc">Projects</button><button type="button" class="chakra-button css-1e9rbwc">Experiences</button><button type="button" class="chakra-button css-1e9rbwc">Badges</button></div></div></div><div style="position:fixed;left:0;top:50%;transform:translateY(-50%);z-index:1000;display:flex;flex-direction:column;align-items:flex-start;padding:6px"><div style="background-color:#1E1E1E;padding:0;border-top-right-radius:12px;border-bottom-right-radius:12px;overflow-x:hidden;color:white;max-height:80vh;overflow-y:auto;box-shadow:2px 2px 8px rgba(0,0,0,0.3);transition:width 0.3s ease, padding 0.3s ease;width:20px;font-family:sans-serif;font-size:0.9em"><div style="writing-mode:vertical-rl;transform:rotate(180deg);cursor:pointer;color:#aaa;font-weight:bold;text-align:center;display:flex;align-items:center;justify-content:center;padding:12px 0px 12px 12px">Table Of Contents</div></div></div><article style="margin-top:50px"><style data-emotion="css 13gpwcx">.css-13gpwcx{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;width:70%;}@media screen and (min-width: 48em){.css-13gpwcx{width:35%;}}</style><div class="css-13gpwcx"><style data-emotion="css xndikn">.css-xndikn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;opacity:0.7;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:var(--chakra-space-6);margin-bottom:var(--chakra-space-6);cursor:pointer;}</style><div __hover="[object Object]" class="css-xndikn"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"></path></svg><style data-emotion="css 1v4xcoh">.css-1v4xcoh{margin-left:var(--chakra-space-2);}</style><p class="chakra-text css-1v4xcoh">Back to Labs Content</p></div><style data-emotion="css 19hrdxn">.css-19hrdxn{margin-top:var(--chakra-space-6);margin-bottom:var(--chakra-space-6);}</style><div class="chakra-wrap css-19hrdxn"><style data-emotion="css amf3lp">.css-amf3lp{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;list-style-type:none;gap:var(--chakra-space-3);padding:0px;}</style><ul class="chakra-wrap__list css-amf3lp"><style data-emotion="css 1yp4ln">.css-1yp4ln{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}</style><li class="chakra-wrap__listitem css-1yp4ln"><style data-emotion="css 171bwqx">.css-171bwqx{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;vertical-align:top;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;font-weight:var(--chakra-fontWeights-medium);line-height:1.2;outline:2px solid transparent;outline-offset:2px;--tag-color:var(--badge-color);--tag-bg:var(--badge-bg);--tag-shadow:var(--badge-shadow);color:var(--tag-color);background:var(--tag-bg);box-shadow:var(--tag-shadow);min-height:var(--tag-min-height);min-width:var(--tag-min-width);font-size:var(--tag-font-size);-webkit-padding-inline-start:var(--tag-padding);padding-inline-start:var(--tag-padding-inline);-webkit-padding-inline-end:var(--tag-padding);padding-inline-end:var(--tag-padding-inline);--tag-min-height:var(--chakra-sizes-6);--tag-min-width:var(--chakra-sizes-6);--tag-font-size:var(--chakra-fontSizes-sm);--tag-padding-inline:var(--chakra-space-2);--badge-bg:var(--chakra-colors-gray-500);--badge-color:var(--chakra-colors-white);border-radius:var(--chakra-radii-full);}.css-171bwqx:focus-visible,.css-171bwqx[data-focus-visible]{--tag-shadow:var(--chakra-shadows-outline);}.chakra-ui-dark .css-171bwqx:not([data-theme]),[data-theme=dark] .css-171bwqx:not([data-theme]),.css-171bwqx[data-theme=dark]{--badge-bg:rgba(113, 128, 150, 0.6);--badge-color:var(--chakra-colors-whiteAlpha-800);}</style><span class="css-171bwqx"><style data-emotion="css 1ny2kle">.css-1ny2kle{line-height:1.2;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:var(--chakra-line-clamp);--chakra-line-clamp:1;}</style><span class="css-1ny2kle">SQL</span></span></li><li class="chakra-wrap__listitem css-1yp4ln"><span class="css-171bwqx"><span class="css-1ny2kle">Backend</span></span></li><li class="chakra-wrap__listitem css-1yp4ln"><span class="css-171bwqx"><span class="css-1ny2kle">System Design</span></span></li><li class="chakra-wrap__listitem css-1yp4ln"><span class="css-171bwqx"><span class="css-1ny2kle">Software Architecture</span></span></li><li class="chakra-wrap__listitem css-1yp4ln"><span class="css-171bwqx"><span class="css-1ny2kle">API</span></span></li></ul></div><style data-emotion="css xznn8e">.css-xznn8e{font-family:var(--chakra-fonts-heading);font-weight:var(--chakra-fontWeights-bold);font-size:var(--chakra-fontSizes-3xl);line-height:1.33;margin-top:var(--chakra-space-6);margin-bottom:var(--chakra-space-6);color:whitesmoke;}@media screen and (min-width: 48em){.css-xznn8e{font-size:var(--chakra-fontSizes-4xl);line-height:1.2;}}</style><h2 class="chakra-heading css-xznn8e">Building a Simple CQRS Pattern Architecture</h2><style data-emotion="css 10us9dh">.css-10us9dh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:var(--chakra-space-2);margin-top:var(--chakra-space-6);margin-bottom:var(--chakra-space-6);}</style><div class="chakra-stack css-10us9dh"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" style="opacity:0.7" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"></path></svg><style data-emotion="css u3j705">.css-u3j705{font-size:var(--chakra-fontSizes-xs);color:var(--chakra-colors-gray-500);white-space:normal;}@media screen and (min-width: 48em){.css-u3j705{font-size:var(--chakra-fontSizes-sm);white-space:nowrap;}}</style><p class="chakra-text css-u3j705">Saturday, December 7, 2024 at 9:06:28 AM GMT+8</p></div></div><style data-emotion="css 1ng8u8c">.css-1ng8u8c{opacity:0.6;border:0;border-color:inherit;border-style:solid;border-bottom-width:1px;width:70%;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:var(--chakra-space-6);margin-bottom:var(--chakra-space-6);}@media screen and (min-width: 48em){.css-1ng8u8c{width:35%;}}</style><hr aria-orientation="horizontal" class="chakra-divider css-1ng8u8c"/><style data-emotion="css 1ohcn7d">.css-1ohcn7d{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;width:70%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}@media screen and (min-width: 48em){.css-1ohcn7d{width:35%;}}</style><div class="css-1ohcn7d"><div class="content" style="overflow-x:auto;font-size:1.3em"><p><span style="color: rgb(255, 255, 255);">The&nbsp;</span><strong style="color: rgb(255, 255, 255);">Command Query Responsibility Segregation (CQRS)</strong><span style="color: rgb(255, 255, 255);">&nbsp;pattern is an architectural pattern used to separate the&nbsp;</span><strong style="color: rgb(255, 255, 255);">write</strong><span style="color: rgb(255, 255, 255);">&nbsp;(commands) and&nbsp;</span><strong style="color: rgb(255, 255, 255);">read</strong><span style="color: rgb(255, 255, 255);">&nbsp;(queries) sides of an application. This separation ensures scalability, performance optimization, and flexibility, especially for systems with complex business logic.</span></p><p><span style="color: rgb(255, 255, 255);">This article explains how to design a&nbsp;</span><strong style="color: rgb(255, 255, 255);">simple CQRS pattern</strong><span style="color: rgb(255, 255, 255);">&nbsp;and implement it in a practical example.</span></p><p><br></p><p><span style="color: rgb(255, 255, 255);"><img src="https://firebasestorage.googleapis.com/v0/b/personal-blog-darmajr.appspot.com/o/blog-content%2Fcqrs.png?alt=media&amp;token=6eab7b0b-37d8-49f2-9137-27dadd766c96" alt="CQRS Basic Pattern" width="720px"></span></p><p><br></p><h2><strong style="color: rgb(255, 255, 255);">Why Do We Need CQRS?</strong></h2><p><span style="color: rgb(255, 255, 255);">CQRS is designed to address challenges in systems where the&nbsp;</span><strong style="color: rgb(255, 255, 255);">read</strong><span style="color: rgb(255, 255, 255);">&nbsp;and&nbsp;</span><strong style="color: rgb(255, 255, 255);">write</strong><span style="color: rgb(255, 255, 255);">&nbsp;operations have distinct requirements. It is particularly helpful in large, complex applications with high performance, scalability, and maintainability needs. Here’s a breakdown of its importance:</span></p><p><span style="color: rgb(255, 255, 255);">Here’s a detailed explanation of&nbsp;</span><strong style="color: rgb(255, 255, 255);">why we need CQRS (Command Query Responsibility Segregation)</strong><span style="color: rgb(255, 255, 255);">:</span></p><h3><strong style="color: rgb(255, 255, 255);">Separation of Concerns</strong></h3><p><span style="color: rgb(255, 255, 255);">In traditional CRUD-based architectures, the same model is often used for both reading and writing data. This can lead to problems such as:</span></p><p><span style="color: rgb(255, 255, 255);">1.Bloated models trying to handle both reads and writes.</span></p><p><span style="color: rgb(255, 255, 255);">2.Tight coupling between read and write logic, making it harder to change one without affecting the other.</span></p><h3><strong style="color: rgb(255, 255, 255);">Optimization of Reads and Writes</strong></h3><p><span style="color: rgb(255, 255, 255);">In many applications, the requirements for&nbsp;</span><strong style="color: rgb(255, 255, 255);">reading data</strong><span style="color: rgb(255, 255, 255);">&nbsp;differ significantly from&nbsp;</span><strong style="color: rgb(255, 255, 255);">writing data</strong><span style="color: rgb(255, 255, 255);">:</span></p><p><strong style="color: rgb(255, 255, 255);">1.Writes</strong><span style="color: rgb(255, 255, 255);">&nbsp;may require strict validation, transactional consistency, and complex domain logic.</span></p><p><strong style="color: rgb(255, 255, 255);">2.Reads</strong><span style="color: rgb(255, 255, 255);">&nbsp;often focus on speed, scalability, and simplicity, potentially requiring optimized or denormalized views of data.</span></p><h2><strong style="color: rgb(255, 255, 255);">Pre-requisites for this lab:</strong></h2><p><span style="color: rgb(255, 255, 255);">In this article we will build simple cqrs architecture with apache kafka, elastic search, and the backend service (Express.js).</span></p><p><span style="color: rgb(255, 255, 255);">&nbsp;VM 1: Runs&nbsp;</span><strong style="color: rgb(255, 255, 255);">Apache Kafka</strong><span style="color: rgb(255, 255, 255);">&nbsp;for handling messaging and event distribution.</span></p><p><span style="color: rgb(255, 255, 255);">&nbsp;VM 2: Runs&nbsp;</span><strong style="color: rgb(255, 255, 255);">Elasticsearch</strong><span style="color: rgb(255, 255, 255);">&nbsp;for read-optimized data storage and retrieval.</span></p><p><strong style="color: rgb(255, 255, 255);">Express.js Services</strong><span style="color: rgb(255, 255, 255);">:</span></p><p><span style="color: rgb(255, 255, 255);">&nbsp;A&nbsp;</span><strong style="color: rgb(255, 255, 255);">Command service</strong><span style="color: rgb(255, 255, 255);">&nbsp;with an endpoint for inserting data into the system.</span></p><p><span style="color: rgb(255, 255, 255);">&nbsp;A&nbsp;</span><strong style="color: rgb(255, 255, 255);">Query service</strong><span style="color: rgb(255, 255, 255);">&nbsp;to retrieve data from Elasticsearch.</span></p><p><span style="color: rgb(255, 255, 255);">&nbsp;Mysql Database that connected to Express.js service</span></p><h2><strong style="color: rgb(255, 255, 255);">Planned Architecture</strong></h2><p><span style="color: rgb(255, 255, 255);"><img src="https://firebasestorage.googleapis.com/v0/b/personal-blog-darmajr.appspot.com/o/blog-content%2FCQRS.webp?alt=media&amp;token=58c5dcef-485c-482d-8c6a-459473e51f04" alt="Planned CQRS Architecture for this lab" width="720px"></span></p><p><span style="color: rgb(255, 255, 255);">The architecture depicted in your diagram showcases a practical implementation of the CQRS (Command Query Responsibility Segregation) pattern using separate services and data stores for handling write and read operations. At its core, this design focuses on decoupling the responsibilities of updating and retrieving data, ensuring better scalability, performance, and maintainability.</span></p><p><span style="color: rgb(255, 255, 255);">The&nbsp;</span><strong style="color: rgb(255, 255, 255);">Command Service</strong><span style="color: rgb(255, 255, 255);">, built with Express.js, serves as the entry point for handling all write operations. Whenever a client sends a request to add or update data, the Command Service writes the data to a MySQL database. This database acts as the system's primary source of truth, ensuring the durability and consistency of all data. Once the data is successfully persisted in MySQL, the Command Service publishes an event to the&nbsp;</span><strong style="color: rgb(255, 255, 255);">Message Broker</strong><span style="color: rgb(255, 255, 255);">, implemented with Apache Kafka. The role of Kafka here is to act as an intermediary that reliably propagates changes across the system, enabling asynchronous communication between services.</span></p><p><span style="color: rgb(255, 255, 255);">On the other side of the architecture, a consumer service listens to the events broadcasted by Kafka. Whenever a new event is received, the consumer retrieves the relevant data from MySQL, transforms it if needed, and indexes it into an&nbsp;</span><strong style="color: rgb(255, 255, 255);">ElasticSearch instance</strong><span style="color: rgb(255, 255, 255);">. ElasticSearch, being optimized for querying and search operations, ensures that data is structured for fast retrieval. This makes it the perfect choice for systems that need to handle complex queries or search-heavy workloads without compromising performance.</span></p><p><span style="color: rgb(255, 255, 255);">The&nbsp;</span><strong style="color: rgb(255, 255, 255);">Read Service</strong><span style="color: rgb(255, 255, 255);">, also built with Express.js, provides an API for retrieving data from ElasticSearch. By querying ElasticSearch directly, the Read Service delivers low-latency responses to clients, even under high query loads. This design ensures that the performance of the read operations does not interfere with or degrade the performance of write operations in the Command Service. The use of ElasticSearch also enables advanced search capabilities, such as full-text search, aggregations, and filtering, which are often slow or complex to implement in traditional relational databases.</span></p><p><span style="color: rgb(255, 255, 255);">This architecture embodies the essence of CQRS by segregating the responsibilities of writing and querying data into distinct paths. The Command Service and MySQL handle writes and ensure data consistency, while the Read Service and ElasticSearch are optimized for delivering fast and efficient queries. The inclusion of Kafka as a Message Broker enables asynchronous processing, allowing the system to remain responsive to client requests even when downstream systems take time to process data.</span></p><h2><strong style="color: rgb(255, 255, 255);">Setting Up Apache Kafka on Ubuntu Server:</strong></h2><p><span style="color: rgb(255, 255, 255);">In this guide, I’ll walk you through setting up&nbsp;</span><strong style="color: rgb(255, 255, 255);">Apache Kafka</strong><span style="color: rgb(255, 255, 255);">&nbsp;on an&nbsp;</span><strong style="color: rgb(255, 255, 255);">Ubuntu Server</strong><span style="color: rgb(255, 255, 255);">&nbsp;running on a virtual machine. While you can certainly use Docker and Docker Compose for a Kafka setup, I decided to go the manual route to test the installation process. So, if you’re ready to roll up your sleeves, let’s dive in!</span></p><p><strong style="color: rgb(255, 255, 255);">Step 1: Install Java</strong></p><p><span style="color: rgb(255, 255, 255);">Kafka runs on the Java Virtual Machine (JVM), so the first step is to install Java. We’ll use OpenJDK 17 for this:</span></p><div><pre><code>sudo apt update
sudo apt install openjdk-17-jdk -y
</code></pre></div><p><span style="color: rgb(255, 255, 255);">Once installed, you can verify the version with:</span></p><div><pre><code>java -version
</code></pre></div><h4><strong style="color: rgb(255, 255, 255);">Step 2: Download Kafka</strong></h4><p><span style="color: rgb(255, 255, 255);">Next, we need to download the Kafka binaries. Use the following command to grab the latest Kafka release:</span></p><div><pre><code>wget https://downloads.apache.org/kafka/3.6.0/kafka_2.13-3.6.0.tgz
</code></pre></div><p><span style="color: rgb(255, 255, 255);">After downloading, extract the archive:</span></p><div><pre><code>tar -xvf kafka_2.13-3.6.0.tgz
</code></pre></div><p><span style="color: rgb(255, 255, 255);">Now, let’s move the extracted Kafka directory to&nbsp;/opt for easier access:</span></p><div><pre><code>sudo mv kafka_2.13-3.6.0 /opt/kafka
</code></pre></div><p><span style="color: rgb(255, 255, 255);">Finally, navigate to the Kafka directory:</span></p><div><pre><code>cd /opt/kafka
</code></pre></div><h4><strong style="color: rgb(255, 255, 255);">Step 3: Configure Kafka Server Properties</strong></h4><p><span style="color: rgb(255, 255, 255);">Before we start Kafka, we need to tweak its configuration a bit. Open the&nbsp;</span><strong style="color: rgb(255, 255, 255);">server.properties</strong><span style="color: rgb(255, 255, 255);">&nbsp;file with a text editor:</span></p><div><pre><code>nano config/server.properties
</code></pre></div><p><span style="color: rgb(255, 255, 255);">Here are a couple of key settings to look for:</span></p><ul><li><span style="color: rgb(255, 255, 255);">log.dirs: This is where Kafka will store its log files. You can set it to a directory of your choice.</span></li><li><span style="color: rgb(255, 255, 255);">zookeper.connect: Ensure this points to your ZooKeeper instance. If you’re running ZooKeeper locally, the default setting should work.</span></li></ul><h4><strong style="color: rgb(255, 255, 255);">Step 4: Start ZooKeeper</strong></h4><p><span style="color: rgb(255, 255, 255);">Kafka relies on&nbsp;</span><strong style="color: rgb(255, 255, 255);">ZooKeeper</strong><span style="color: rgb(255, 255, 255);">&nbsp;to manage its metadata, so we’ll need to start ZooKeeper before starting Kafka. Use the following command to get ZooKeeper up and running:</span></p><div><pre><code>bin/zookeeper-server-start.sh config/zookeeper.properties
</code></pre></div><p><span style="color: rgb(255, 255, 255);">To run ZooKeeper as a background process (so you can keep using your terminal), use this instead:</span></p><div><pre><code>bin/zookeeper-server-start.sh config/zookeeper.properties &gt; /dev/null 2&gt;&amp;1 &amp;
</code></pre></div><h4><strong style="color: rgb(255, 255, 255);">Step 5: Start the Kafka Broker</strong></h4><p><span style="color: rgb(255, 255, 255);">Now that ZooKeeper is running, it’s time to fire up Kafka. Use this command to start the Kafka broker:</span></p><div><pre><code>bin/kafka-server-start.sh config/server.properties
</code></pre></div><p><span style="color: rgb(255, 255, 255);">Or, to run Kafka in the background:</span></p><div><pre><code>bin/kafka-server-start.sh config/server.properties &gt; /dev/null 2&gt;&amp;1 &amp;
</code></pre></div><h4><strong style="color: rgb(255, 255, 255);">Step 6: Test Your Kafka Setup</strong></h4><p><span style="color: rgb(255, 255, 255);">Congratulations! Your Kafka instance is now up and running. Let’s do a quick test to ensure everything works as expected.</span></p><ol><li><strong style="color: rgb(255, 255, 255);">Create a Topic</strong></li><li><span style="color: rgb(255, 255, 255);">Kafka organizes messages into topics. Let’s create a topic named&nbsp;test-topic:</span></li></ol><div><pre><code>bin/kafka-topics.sh --create --topic test-topic --bootstrap-server localhost:9092 --partitions 1 --replication-factor 1
</code></pre></div><ol><li><strong style="color: rgb(255, 255, 255);">List Topics</strong></li><li><span style="color: rgb(255, 255, 255);">To confirm that the topic was created, list all topics:</span></li></ol><div><pre><code>bin/kafka-topics.sh --list --bootstrap-server localhost:9092
</code></pre></div><ol><li><strong style="color: rgb(255, 255, 255);">Start a Producer</strong></li><li><span style="color: rgb(255, 255, 255);">A producer sends messages to a Kafka topic. Start the producer for&nbsp;test-topic:</span></li></ol><div><pre><code>bin/kafka-console-producer.sh --topic test-topic --bootstrap-server localhost:9092
</code></pre></div><ol><li><span style="color: rgb(255, 255, 255);">Type a few messages in the terminal, and they’ll be sent to the topic.</span></li><li><strong style="color: rgb(255, 255, 255);">Start a Consumer</strong></li><li><span style="color: rgb(255, 255, 255);">A consumer reads messages from a topic. Start a consumer to read messages from&nbsp;test-topic:</span></li></ol><div><pre><code>bin/kafka-console-consumer.sh --topic test-topic --from-beginning --bootstrap-server localhost:9092
</code></pre></div><ol><li><span style="color: rgb(255, 255, 255);">You should see the messages you typed in the producer terminal appear here!</span></li></ol><p><br></p><p><br></p><h2><strong style="color: rgb(255, 255, 255);">Part 2: Installing Elasticsearch on a Virtual Machine</strong></h2><h4><strong style="color: rgb(255, 255, 255);">Step 1: SSH into Your Server</strong></h4><p><span style="color: rgb(255, 255, 255);">Connect to your EC2 instance (or VM):</span></p><div><pre><code>ssh -i /path/to/your-key.pem ec2-user@your-ec2-public-ip
</code></pre></div><h4><strong style="color: rgb(255, 255, 255);">Step 2: Install Java</strong></h4><p><span style="color: rgb(255, 255, 255);">Elasticsearch also needs Java:</span></p><div><pre><code>sudo apt update
sudo apt install -y openjdk-11-jdk
</code></pre></div><h4><strong style="color: rgb(255, 255, 255);">Step 3: Install Elasticsearch</strong></h4><div><pre><code>wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -
sudo apt install -y apt-transport-https
echo "deb https://artifacts.elastic.co/packages/8.x/apt stable main" | sudo tee -a /etc/apt/sources.list.d/elastic-8.x.list

sudo apt update

sudo apt install -y elasticsearch
</code></pre></div><h4><strong style="color: rgb(255, 255, 255);">Step 4: Enable and Start Elasticsearch</strong></h4><div><pre><code>sudo systemctl enable elasticsearch
sudo systemctl start elasticsearch
</code></pre></div><h4><strong style="color: rgb(255, 255, 255);">Step 5: Configure Elasticsearch for External Access</strong></h4><p><span style="color: rgb(255, 255, 255);">Edit the configuration:</span></p><div><pre><code>sudo nano /etc/elasticsearch/elasticsearch.yml
</code></pre></div><p><span style="color: rgb(255, 255, 255);">Set these properties:</span></p><div><pre><code>network.host: 0.0.0.0
http.port: 9200
</code></pre></div><p><span style="color: rgb(255, 255, 255);">Restart Elasticsearch:</span></p><div><pre><code>sudo systemctl restart elasticsearch
</code></pre></div><h4><strong style="color: rgb(255, 255, 255);">Step 6: Verify Elasticsearch</strong></h4><p><span style="color: rgb(255, 255, 255);">Run:</span></p><div><pre><code>curl -X GET http://localhost:9200
</code></pre></div><p><span style="color: rgb(255, 255, 255);">You should see a JSON response!</span></p><p><br></p><h2><strong style="color: rgb(255, 255, 255);">Part:3 Explanation of the Express.js POST Route for Inserting User Data and Sending to Kafka</strong></h2><div><pre><code>import express from 'express';
import { Kafka } from 'kafkajs';
import mysql from 'mysql2/promise'; // MySQL client for Node.js

const app = express();
app.use(express.json()); // Parse JSON request bodies

// Kafka producer setup
const kafka = new Kafka({
&nbsp; &nbsp; clientId: 'my-app',
&nbsp; &nbsp; brokers: ['localhost:9092'], // Replace with your Kafka broker(s)
});

const producer = kafka.producer();

// Connect Kafka producer
async function connectProducer() {
&nbsp; &nbsp; await producer.connect();
}

connectProducer().catch(console.error);

// MySQL database connection setup
const dbConfig = {
&nbsp; &nbsp; host: 'localhost',
&nbsp; &nbsp; user: 'root', // Replace with your MySQL username
&nbsp; &nbsp; password: 'root', // Replace with your MySQL password
&nbsp; &nbsp; database: 'user', // Replace with your database name
};

let connection;

async function connectDatabase() {
&nbsp; &nbsp; try {
&nbsp; &nbsp; &nbsp; &nbsp; connection = await mysql.createConnection(dbConfig);
&nbsp; &nbsp; &nbsp; &nbsp; console.log('Connected to MySQL database');
&nbsp; &nbsp; } catch (error) {
&nbsp; &nbsp; &nbsp; &nbsp; console.error('Error connecting to MySQL:', error);
&nbsp; &nbsp; &nbsp; &nbsp; process.exit(1);
&nbsp; &nbsp; }
}

connectDatabase();

// POST route to insert user data
app.post('/users', async (req, res) =&gt; {
&nbsp; &nbsp; const userData = req.body;

&nbsp; &nbsp; try {
&nbsp; &nbsp; &nbsp; &nbsp; // Insert data into MySQL database
&nbsp; &nbsp; &nbsp; &nbsp; const { name, email, password } = userData; // Assuming user data has 'name' and 'email' fields
&nbsp; &nbsp; &nbsp; &nbsp; const [result] = await connection.execute(
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'INSERT INTO user (username, email, password) VALUES (?, ?, ?)',
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name, email, password]
&nbsp; &nbsp; &nbsp; &nbsp; );

&nbsp; &nbsp; &nbsp; &nbsp; console.log('User inserted into database:', result);

&nbsp; &nbsp; &nbsp; &nbsp; // Send the user data to Kafka topic 'user-topic'
&nbsp; &nbsp; &nbsp; &nbsp; await producer.send({
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; topic: 'users-topic', // Replace with your topic
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; messages: [
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { value: JSON.stringify(userData) },
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ],
&nbsp; &nbsp; &nbsp; &nbsp; });

&nbsp; &nbsp; &nbsp; &nbsp; res.status(201).json({ message: 'User data inserted into database and sent to Kafka' });
&nbsp; &nbsp; } catch (error) {
&nbsp; &nbsp; &nbsp; &nbsp; console.error('Error processing request:', error);
&nbsp; &nbsp; &nbsp; &nbsp; res.status(500).json({ message: 'Error processing request' });
&nbsp; &nbsp; }
});

// Start Express server
app.listen(3000, () =&gt; {
&nbsp; &nbsp; console.log('Server running on http://localhost:3000');
});
</code></pre></div><p><br></p><p><span style="color: rgb(255, 255, 255);">In the given code snippet, an Express.js route (/users) is created to handle&nbsp;</span><strong style="color: rgb(255, 255, 255);">POST requests</strong><span style="color: rgb(255, 255, 255);">. This route processes user data by first saving it into a MySQL database and then sending the same data to a Kafka topic. Below is a step-by-step explanation of how this route works:</span></p><h4><strong style="color: rgb(255, 255, 255);">1.&nbsp;Endpoint Definition and Request Handling</strong></h4><div><pre><code>The app.post('/users', async (req, res) defines a route that listens for POST requests at the /users endpoint. It uses async/await to handle asynchronous operations such as database insertion and Kafka messaging. The req.body object is used to extract the data sent by the client in the request payload.const userData = req.body;
</code></pre></div><p><span style="color: rgb(255, 255, 255);">The&nbsp;userData object contains the user-provided information, typically in JSON format. For example, it might include fields like&nbsp;name. email and password.</span></p><h4><strong style="color: rgb(255, 255, 255);">2.&nbsp;Inserting User Data into MySQL</strong></h4><p><span style="color: rgb(255, 255, 255);">To store user data, the route uses a prepared SQL statement to prevent&nbsp;</span><strong style="color: rgb(255, 255, 255);">SQL injection attacks</strong><span style="color: rgb(255, 255, 255);">. The&nbsp;</span>connection.execute()<span style="color: rgb(255, 255, 255);">&nbsp;function interacts with the database, where&nbsp;name, email and passwords fields are inserted into a&nbsp;user table.</span></p><div><pre><code>const [result] = await connection.execute(
    'INSERT INTO user (username, email, password) VALUES (?, ?, ?)',
    [name, email, password]
);
</code></pre></div><ul><li><strong style="color: rgb(255, 255, 255);">Prepared Statement</strong><span style="color: rgb(255, 255, 255);">: The&nbsp;? placeholders in the SQL query are replaced with actual values (name, email, password) safely.</span></li><li><strong style="color: rgb(255, 255, 255);">Deconstructed User Data</strong><span style="color: rgb(255, 255, 255);">: The&nbsp;name,&nbsp;email, and&nbsp;password fields are extracted from the&nbsp;userData object for better readability and security.</span></li><li><strong style="color: rgb(255, 255, 255);">Result</strong><span style="color: rgb(255, 255, 255);">: The&nbsp;connection.execite()&nbsp;method returns an array, where&nbsp;result contains metadata about the operation, such as the number of rows affected.</span></li></ul><p><span style="color: rgb(255, 255, 255);">If the operation succeeds, a log is generated to confirm that the user data was inserted into the database:</span></p><div><pre><code>console.log('User inserted into database:', result);
</code></pre></div><h4><strong style="color: rgb(255, 255, 255);">3.&nbsp;Sending Data to a Kafka Topic</strong></h4><p><span style="color: rgb(255, 255, 255);">After successfully storing the data in MySQL, the route sends the same data to a Kafka topic for further processing. Kafka is often used to handle large-scale distributed messaging and stream processing.</span></p><div><pre><code>await producer.send({
    topic: 'users-topic', // Replace with your topic
    messages: [
        { value: JSON.stringify(userData) },
    ],
});
</code></pre></div><ul><li><strong style="color: rgb(255, 255, 255);">Kafka Producer</strong><span style="color: rgb(255, 255, 255);">p: The producer object is an instance of Kafka's producer client, which is responsible for sending messages to Kafka topics.</span></li><li><strong style="color: rgb(255, 255, 255);">Topic Name</strong><span style="color: rgb(255, 255, 255);">: The&nbsp;topic field specifies the destination Kafka topic (user-topic in this case). This is where the message will be sent for further processing by Kafka consumers.</span></li><li><strong style="color: rgb(255, 255, 255);">Message Payload</strong><span style="color: rgb(255, 255, 255);">: The&nbsp;message array contains the data to be sent. Each message is an object with a&nbsp;value field, which holds the serialized user data (converted to JSON using&nbsp;JSON.stringfy(userData)).</span></li></ul><p><span style="color: rgb(255, 255, 255);">This mechanism ensures that user data is available for other systems (e.g., analytics, logging, or notifications) in near real-time.</span></p><h4><strong style="color: rgb(255, 255, 255);">4.&nbsp;Response to the Client</strong></h4><p>If both the database insertion and Kafka message-sending steps succeed, the server sends a 201 Created response to the client with a success message:</p><div><pre><code>res.status(201).json({ message: 'User data inserted into database and sent to Kafka' });
</code></pre></div><p>The 201 status code indicates that the request was successfully processed and a new resource was created.</p><h4><strong style="color: rgb(255, 255, 255);">5.&nbsp;Error Handling</strong></h4><p>The try-catch block ensures that errors during either database insertion or Kafka messaging are gracefully handled. If an error occurs, it is logged for debugging purposes, and the client receives a 500 Internal Server Error response:</p><div><pre><code>catch (error) {
    console.error('Error processing request:', error);
    res.status(500).json({ message: 'Error processing request' });
}
</code></pre></div><p><span style="color: rgb(255, 255, 255);">This approach provides transparency to developers and prevents the application from crashing due to unhandled exceptions.</span></p><p><br></p><p><span style="color: rgb(255, 255, 255);">After building the express.js service to insert data in mysql database and message broker. we will create the instance that listening on this producer.</span></p><p><br></p><h2><strong style="color: rgb(255, 255, 255);">Part 4: Explanation of Kafka Consumer with Elasticsearch Integration</strong></h2><div><pre><code>import { Kafka } from 'kafkajs';
import { Client } from '@elastic/elasticsearch';

// Kafka consumer setup
const kafka = new Kafka({
&nbsp; &nbsp; clientId: 'express-app',
&nbsp; &nbsp; brokers: ['192.168.128.207:9092'], // Replace with your Kafka broker(s)
});

const consumer = kafka.consumer({ groupId: 'user-group' });

// Elasticsearch client setup
const esClient = new Client({
&nbsp; &nbsp; node: 'http://localhost:9200', // Replace with your Elasticsearch URL
});

// Kafka consumer processing
async function consumeMessages() {
&nbsp; &nbsp; await consumer.connect();
&nbsp; &nbsp; await consumer.subscribe({ topic: 'users-topic', fromBeginning: true }); // Replace with your topic

&nbsp; &nbsp; await consumer.run({
&nbsp; &nbsp; &nbsp; &nbsp; eachMessage: async ({ topic, partition, message }) =&gt; {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const userData = JSON.parse(message.value.toString());

&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Insert data into Elasticsearch
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const response = await esClient.index({
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index: 'users', // The Elasticsearch index to use
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id: message.name,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document: userData,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.log('User data inserted into Elasticsearch:', response);
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (error) {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console.error('Error inserting data into Elasticsearch:', error);
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
&nbsp; &nbsp; &nbsp; &nbsp; },
&nbsp; &nbsp; });
}

consumeMessages().catch(console.error);
</code></pre></div><p>This code demonstrates how to integrate Kafka as a messaging system and Elasticsearch as a search and data indexing tool in a Node.js application. The overall flow involves consuming messages from a Kafka topic and then indexing the received data into Elasticsearch for further use, such as querying or searching.</p><p>To start, the script imports two essential libraries: KafkaJS and Elasticsearch client. KafkaJS is a JavaScript library used for interacting with Kafka, which is a distributed streaming platform. The Kafka client allows you to create consumers that can listen to Kafka topics and process the messages in real time. On the other hand, the Elasticsearch client facilitates communication with an Elasticsearch cluster, enabling the ability to store and index documents, which can later be queried or analyzed.</p><p>The Kafka consumer is set up by first initializing the Kafka client with a unique clientId (express-app) and specifying the Kafka brokers. These brokers are the Kafka servers where the consumer will connect. The consumer is created with a groupId, which is user-group in this case. The group ID helps manage message consumption across multiple instances of the consumer. When consumers with the same group ID listen to a Kafka topic, Kafka ensures that each partition of the topic is assigned to only one consumer in the group, effectively balancing the load.</p><p>Next, the code sets up the Elasticsearch client by specifying the address of the Elasticsearch node (http://localhost:9200). This client will be used to interact with the Elasticsearch service where the user data will be indexed. Elasticsearch is widely used for its powerful search and analytics capabilities, which can handle large volumes of data and provide fast search results.</p><p>Once both Kafka and Elasticsearch clients are set up, the consumeMessages() function is created to handle the actual logic of consuming messages from Kafka. This function first connects to the Kafka cluster and subscribes to the users-topic. By subscribing to the topic, the consumer listens for new messages that are published to that topic. The fromBeginning: true option ensures that the consumer starts processing messages from the very beginning of the topic’s log, meaning it will consume all the messages from when it first subscribes, not just new messages that arrive after it subscribes.</p><p>The function then uses consumer.run() to begin consuming messages. Each message from the Kafka topic is processed in the eachMessage callback function. Inside this function, the message's value is parsed from a buffer into a JavaScript object (since Kafka messages are typically sent as binary data). The parsed data, which represents user information in this case, is then indexed into Elasticsearch. The esClient.index() method is used to insert this data into the users index in Elasticsearch. A unique identifier for the document is generated using the message's name field. This id ensures that each document in Elasticsearch can be uniquely identified.</p><p>If the data insertion into Elasticsearch is successful, a response from Elasticsearch is logged to the console, confirming that the user data has been indexed. If an error occurs while inserting the data, the error is caught and logged.</p><p>Finally, the consumeMessages() function is invoked, and any unhandled errors are caught by console.error() to prevent the application from crashing. This ensures that the consumer will keep running and processing messages as they arrive, continuously feeding new data into Elasticsearch for indexing.</p><h2><strong style="color: rgb(255, 255, 255);">Part 5: Wrapup what we have been doing</strong></h2><p>The architecture discussed in this article aligns well with the CQRS (Command Query Responsibility Segregation) pattern, which is a powerful design pattern that separates the logic of reading data (queries) from the logic of writing data (commands). By implementing Kafka and Elasticsearch in conjunction with MySQL and Express.js, we create a robust system that effectively adheres to the principles of CQRS.</p><p>In this architecture, the write operations (commands) are handled by the /users POST route in the Express.js service. When user data is received, it's inserted into the MySQL database and sent to Kafka. Kafka acts as the message bus, decoupling the data-writing process from the read operations and ensuring that data can be asynchronously processed and consumed by different systems or services.</p><p>The read operations (queries) are efficiently handled by Elasticsearch. After the data is consumed from Kafka and indexed into Elasticsearch, it becomes readily available for fast and scalable querying. Elasticsearch's ability to index and search large volumes of data makes it an excellent fit for handling query-based operations in this architecture.</p><p>By using CQRS, we ensure that the system is optimized for both reading and writing operations, enabling high scalability and responsiveness. Kafka, as the message broker, enables asynchronous communication and allows for horizontal scaling in the system. Meanwhile, Elasticsearch ensures that queries on user data are fast, efficient, and scalable.</p><p>This CQRS-based approach also helps with performance optimization, as read and write concerns are handled separately. It allows for the scaling of each part of the system independently, depending on whether there is a higher load on reading or writing. The separation of concerns promotes better maintainability, flexibility, and scalability, making this architecture ideal for modern, high-traffic applications requiring real-time data processing and analytics.</p><p>In conclusion, by integrating Kafka, Elasticsearch, and Express.js with a CQRS approach, this system architecture offers a scalable, maintainable, and highly performant solution for handling real-time data in applications where reading and writing data need to be optimized separately.</p></div></div><style data-emotion="css 1c2mb36">.css-1c2mb36{opacity:0.6;border:0;border-color:inherit;border-style:solid;border-bottom-width:1px;width:70%;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:var(--chakra-space-10);margin-bottom:var(--chakra-space-10);}@media screen and (min-width: 48em){.css-1c2mb36{width:35%;}}</style><hr aria-orientation="horizontal" class="chakra-divider css-1c2mb36"/><style data-emotion="css 1rhkvcy">.css-1rhkvcy{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;width:70%;border-color:var(--chakra-colors-gray-200);}@media screen and (min-width: 48em){.css-1rhkvcy{width:35%;}}</style><div class="css-1rhkvcy"><style data-emotion="css 159w8ar">.css-159w8ar{font-family:var(--chakra-fonts-heading);font-size:var(--chakra-fontSizes-3xl);line-height:1.33;font-weight:var(--chakra-fontWeights-bold);margin-bottom:var(--chakra-space-6);}@media screen and (min-width: 48em){.css-159w8ar{font-size:var(--chakra-fontSizes-4xl);line-height:1.2;}}</style><h2 class="chakra-heading css-159w8ar">Another Recommended Labs Content</h2><style data-emotion="css 1urha0v">.css-1urha0v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--chakra-space-6);}</style><div class="chakra-stack css-1urha0v"><style data-emotion="css 1sgacbr">.css-1sgacbr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;min-width:0px;word-wrap:break-word;--card-bg:var(--chakra-colors-chakra-body-bg);background-color:var(--card-bg);border-width:var(--card-border-width, 0);border-color:var(--card-border-color);--card-radius:var(--chakra-radii-md);--card-padding:var(--chakra-space-5);--card-border-width:1px;--card-border-color:var(--chakra-colors-chakra-border-color);width:100%;border-radius:var(--chakra-radii-lg);box-shadow:var(--chakra-shadows-md);-webkit-transition:all 0.2s;transition:all 0.2s;background:#292b37;color:#faf9ff;}.css-1sgacbr:hover,.css-1sgacbr[data-hover]{box-shadow:var(--chakra-shadows-lg);border-color:#cc7bc9;}</style><div class="chakra-card css-1sgacbr"><style data-emotion="css 1sl53ol">.css-1sl53ol{padding:var(--card-padding);}</style><div class="chakra-card__header css-1sl53ol"><style data-emotion="css 60qyjo">.css-60qyjo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:var(--chakra-space-2);margin-bottom:var(--chakra-space-2);}</style><div class="css-60qyjo"><style data-emotion="css og0dm8">.css-og0dm8{display:inline-block;white-space:nowrap;vertical-align:middle;-webkit-padding-start:var(--chakra-space-1);padding-inline-start:var(--chakra-space-1);-webkit-padding-end:var(--chakra-space-1);padding-inline-end:var(--chakra-space-1);text-transform:uppercase;font-size:var(--chakra-fontSizes-xs);border-radius:var(--chakra-radii-sm);font-weight:var(--chakra-fontWeights-bold);background:var(--badge-bg);color:var(--badge-color);box-shadow:var(--badge-shadow);--badge-bg:var(--chakra-colors-purple-100);--badge-color:var(--chakra-colors-purple-800);}.chakra-ui-dark .css-og0dm8:not([data-theme]),[data-theme=dark] .css-og0dm8:not([data-theme]),.css-og0dm8[data-theme=dark]{--badge-bg:rgba(214, 188, 250, 0.16);--badge-color:var(--chakra-colors-purple-200);}.css-og0dm8:hover,.css-og0dm8[data-hover]{background:#866bab;color:#faf9ff;}</style><span class="chakra-badge css-og0dm8">Database</span><span class="chakra-badge css-og0dm8">Database Architecture</span><span class="chakra-badge css-og0dm8">Software Architecture</span><span class="chakra-badge css-og0dm8">System Design</span></div><style data-emotion="css lbzbb8">.css-lbzbb8{font-family:var(--chakra-fonts-heading);font-weight:var(--chakra-fontWeights-bold);font-size:var(--chakra-fontSizes-xl);line-height:1.2;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}</style><h3 class="chakra-heading css-lbzbb8"><a href="/blog/Understanding-Database-Partitioning-vs-Sharding-Concepts-Benefits-and-Challenges" style="text-decoration:none;color:#faf9ff;font-weight:bold" _hover="[object Object]">Understanding Database Partitioning vs Sharding: Concepts, Benefits, and Challenges</a></h3><style data-emotion="css xvemug">.css-xvemug{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:var(--chakra-fontSizes-sm);color:#b0b0b0;margin-top:var(--chakra-space-2);}</style><div class="css-xvemug"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" style="margin-right:4px" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"></path></svg><time class="chakra-text css-0" dateTime="2025-05-17 09:42:15">May 17, 2025</time><style data-emotion="css 17xejub">.css-17xejub{-webkit-flex:1;-ms-flex:1;flex:1;justify-self:stretch;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;}</style><div class="css-17xejub"></div></div></div><style data-emotion="css pmu2q8">.css-pmu2q8{padding:var(--card-padding);-webkit-flex:1;-ms-flex:1;flex:1;}</style><div class="chakra-card__body css-pmu2q8"><style data-emotion="css 1u4c2u1">.css-1u4c2u1{color:#b0b0b0;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:var(--chakra-line-clamp);--chakra-line-clamp:3;}</style><p class="chakra-text css-1u4c2u1">When dealing with large volumes of data, efficient database management becomes essential. Two widely used techniques to improve performance and scalability are database partitioning and database sharding. Although often confused, these approaches differ fundamentally in architecture, complexity, and suitable use cases. This article explores these differences in detail, helping you decide which fits your application best.</p></div><style data-emotion="css 1a7q9t8">.css-1a7q9t8{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:var(--card-padding);}</style><div class="chakra-card__footer css-1a7q9t8"><a href="https://barbarpotato.github.io/Labs-d4735e3a265e1/Understanding-Database-Partitioning-vs-Sharding-Concepts-Benefits-and-Challenges" style="text-decoration:none;color:#866bab"><style data-emotion="css lfcu93">.css-lfcu93{font-weight:var(--chakra-fontWeights-medium);}.css-lfcu93:hover,.css-lfcu93[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;color:#cc7bc9;}</style><p class="chakra-text css-lfcu93">Read more</p></a></div></div><div class="chakra-card css-1sgacbr"><div class="chakra-card__header css-1sl53ol"><div class="css-60qyjo"><span class="chakra-badge css-og0dm8">System Design</span><span class="chakra-badge css-og0dm8">CAP Theorem</span><span class="chakra-badge css-og0dm8">Distributed Systems</span></div><h3 class="chakra-heading css-lbzbb8"><a href="/blog/System-Design-Simplified-The-Trade-Off-Triangle-You-Must-Master" style="text-decoration:none;color:#faf9ff;font-weight:bold" _hover="[object Object]">System Design Simplified: The Trade-Off Triangle You Must Master</a></h3><div class="css-xvemug"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" style="margin-right:4px" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"></path></svg><time class="chakra-text css-0" dateTime="2025-05-13 01:58:48">May 13, 2025</time><div class="css-17xejub"></div></div></div><div class="chakra-card__body css-pmu2q8"><p class="chakra-text css-1u4c2u1">Behind every well-architected system is a set of tough decisions. The CAP Theorem simplifies those decisions by showing you what you must give up to keep your system fast, correct, and resilient. Learn how to apply this in real-world architecture.</p></div><div class="chakra-card__footer css-1a7q9t8"><a href="https://barbarpotato.github.io/Labs-d4735e3a265e1/System-Design-Simplified-The-Trade-Off-Triangle-You-Must-Master" style="text-decoration:none;color:#866bab"><p class="chakra-text css-lfcu93">Read more</p></a></div></div><div class="chakra-card css-1sgacbr"><div class="chakra-card__header css-1sl53ol"><div class="css-60qyjo"><span class="chakra-badge css-og0dm8">DDD</span><span class="chakra-badge css-og0dm8">Software Architecture</span><span class="chakra-badge css-og0dm8">System Design</span></div><h3 class="chakra-heading css-lbzbb8"><a href="/blog/Why-Domain-Driven-Design-DDD-Matters-From-Chaos-to-Clarity-in-Complex-Systems" style="text-decoration:none;color:#faf9ff;font-weight:bold" _hover="[object Object]">Why Domain-Driven Design (DDD) Matters: From Chaos to Clarity in Complex Systems</a></h3><div class="css-xvemug"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" style="margin-right:4px" height="16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"></path></svg><time class="chakra-text css-0" dateTime="2025-05-12 04:23:04">May 12, 2025</time><div class="css-17xejub"></div></div></div><div class="chakra-card__body css-pmu2q8"><p class="chakra-text css-1u4c2u1">Domain-Driven Design (DDD) is a powerful approach to software development that places the business domain—not the technology—at the center of your design decisions. First introduced by Eric Evans, DDD is essential for developers and architects who want to build systems that reflect real-world complexity and change.</p></div><div class="chakra-card__footer css-1a7q9t8"><a href="https://barbarpotato.github.io/Labs-d4735e3a265e1/Why-Domain-Driven-Design-DDD-Matters-From-Chaos-to-Clarity-in-Complex-Systems" style="text-decoration:none;color:#866bab"><p class="chakra-text css-lfcu93">Read more</p></a></div></div></div></div><style data-emotion="css 1s9eud0">.css-1s9eud0{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--chakra-radii-md);font-weight:var(--chakra-fontWeights-semibold);transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-10);min-width:var(--chakra-sizes-10);font-size:var(--chakra-fontSizes-md);-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);background:var(--chakra-colors-purple-500);color:var(--chakra-colors-white);position:fixed;right:20px;bottom:20px;z-index:1000;}.css-1s9eud0:focus-visible,.css-1s9eud0[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-1s9eud0:disabled,.css-1s9eud0[disabled],.css-1s9eud0[aria-disabled=true],.css-1s9eud0[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-1s9eud0:hover,.css-1s9eud0[data-hover]{background:var(--chakra-colors-purple-600);}.css-1s9eud0:hover:disabled,.css-1s9eud0[data-hover]:disabled,.css-1s9eud0:hover[disabled],.css-1s9eud0[data-hover][disabled],.css-1s9eud0:hover[aria-disabled=true],.css-1s9eud0[data-hover][aria-disabled=true],.css-1s9eud0:hover[data-disabled],.css-1s9eud0[data-hover][data-disabled]{background:var(--chakra-colors-purple-500);}.css-1s9eud0:active,.css-1s9eud0[data-active]{background:var(--chakra-colors-purple-700);}</style><button type="button" class="chakra-button css-1s9eud0">Ask Darwin AI</button></article><style data-emotion="css dn2uzk">.css-dn2uzk{box-shadow:var(--chakra-shadows-dark-lg);margin-top:100px;background-color:#292b37;color:var(--chakra-colors-white);padding-top:var(--chakra-space-10);padding-bottom:var(--chakra-space-10);}</style><footer class="css-dn2uzk"><style data-emotion="css 1njwymr">.css-1njwymr{max-width:var(--chakra-sizes-7xl);-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);}@media screen and (min-width: 30em){.css-1njwymr{-webkit-padding-start:var(--chakra-space-6);padding-inline-start:var(--chakra-space-6);-webkit-padding-end:var(--chakra-space-6);padding-inline-end:var(--chakra-space-6);}}@media screen and (min-width: 62em){.css-1njwymr{-webkit-padding-start:var(--chakra-space-8);padding-inline-start:var(--chakra-space-8);-webkit-padding-end:var(--chakra-space-8);padding-inline-end:var(--chakra-space-8);}}</style><div class="css-1njwymr"><style data-emotion="css 1al7er6">.css-1al7er6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media screen and (min-width: 48em){.css-1al7er6{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}}</style><div class="css-1al7er6"><style data-emotion="css b0j2v1">.css-b0j2v1{margin-bottom:var(--chakra-space-8);}@media screen and (min-width: 48em){.css-b0j2v1{margin-bottom:0px;max-width:var(--chakra-sizes-md);}}</style><div class="css-b0j2v1"><style data-emotion="css 70qvj9">.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-70qvj9"><style data-emotion="css wed4oc">.css-wed4oc{font-family:var(--chakra-fonts-heading);font-weight:var(--chakra-fontWeights-bold);line-height:1.33;font-size:var(--chakra-fontSizes-2xl);color:#faf9ff;}@media screen and (min-width: 48em){.css-wed4oc{line-height:1.2;}}</style><h2 class="chakra-heading css-wed4oc"><span style="color:#bd93f9;font-weight:bold">🚀D</span>armawan</h2></div><style data-emotion="css 1cwxbc0">.css-1cwxbc0{margin-top:var(--chakra-space-2);color:var(--chakra-colors-gray-400);}</style><p class="chakra-text css-1cwxbc0">Crafting cutting-edge web experiences with passion and innovation. Let&#x27;s collaborate to turn your vision into reality.</p></div><style data-emotion="css 18q3ifn">.css-18q3ifn{display:grid;grid-gap:var(--chakra-space-8);grid-template-columns:repeat(2, minmax(0, 1fr));width:var(--chakra-sizes-full);}@media screen and (min-width: 30em){.css-18q3ifn{grid-template-columns:repeat(3, minmax(0, 1fr));}}@media screen and (min-width: 48em){.css-18q3ifn{width:auto;}}</style><div class="css-18q3ifn"><div class="css-0"><style data-emotion="css 1r14iby">.css-1r14iby{font-size:var(--chakra-fontSizes-sm);font-weight:var(--chakra-fontWeights-semibold);text-transform:uppercase;margin-bottom:var(--chakra-space-4);}</style><p class="chakra-text css-1r14iby">Connect</p><style data-emotion="css 2xph3x">.css-2xph3x{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--chakra-space-2);}</style><div class="css-2xph3x"><style data-emotion="css r90sma">.css-r90sma{transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-fast);transition-timing-function:var(--chakra-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:2px solid transparent;outline-offset:2px;color:var(--chakra-colors-gray-400);}.css-r90sma:focus-visible,.css-r90sma[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-r90sma:hover,.css-r90sma[data-hover]{color:var(--chakra-colors-pink-300);}</style><a target="_blank" class="chakra-link css-r90sma" href="https://github.com/Barbarpotato">GitHub</a><a target="_blank" class="chakra-link css-r90sma" href="https://www.linkedin.com/in/darmawan-jr-b16135220/">LinkedIn</a><a target="_blank" class="chakra-link css-r90sma" href="https://www.instagram.com/darmajr94?igsh=OGgwNTRnaGFxeTY1">Instagram</a><a target="_blank" class="chakra-link css-r90sma" href="https://api.whatsapp.com/send/?phone=6282148282424&amp;text&amp;type=phone_number&amp;app_absent=0">WhatsApp</a></div></div><div class="css-0"><p class="chakra-text css-1r14iby">Resources</p><div class="css-2xph3x"><a class="chakra-link css-r90sma" href="https://barbarpotato.github.io/">Home</a><a class="chakra-link css-r90sma" href="https://barbarpotato.github.io/About/">About</a><a class="chakra-link css-r90sma" href="https://barbarpotato.github.io/Labs/">Labs</a><a class="chakra-link css-r90sma" href="https://barbarpotato.github.io/Projects/">Projects</a><a class="chakra-link css-r90sma" href="https://barbarpotato.github.io/Experiences/">Experiences</a><a class="chakra-link css-r90sma" href="https://barbarpotato.github.io/Badges/">Badges</a></div></div></div></div><style data-emotion="css 10p8oye">.css-10p8oye{margin-top:var(--chakra-space-8);padding-top:var(--chakra-space-8);border-top:var(--chakra-borders-1px);border-color:var(--chakra-colors-gray-800);}</style><div class="css-10p8oye"><style data-emotion="css 1v5682e">.css-1v5682e{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media screen and (min-width: 48em){.css-1v5682e{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}}</style><div class="css-1v5682e"><style data-emotion="css 6nvm5v">.css-6nvm5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;gap:var(--chakra-space-6);margin-bottom:var(--chakra-space-8);}@media screen and (min-width: 48em){.css-6nvm5v{-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-order:2;-ms-flex-order:2;order:2;margin-bottom:0px;}}</style><div class="css-6nvm5v"><a target="_blank" class="chakra-link css-r90sma" href="https://github.com/Barbarpotato" aria-label="Visit my GitHub profile"><style data-emotion="css 6ey7w3">.css-6ey7w3{width:var(--chakra-sizes-6);height:var(--chakra-sizes-6);display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:currentColor;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" focusable="false" class="chakra-icon css-6ey7w3" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a target="_blank" class="chakra-link css-r90sma" href="https://www.linkedin.com/in/darmawan-jr-b16135220/" aria-label="Visit my LinkedIn profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" focusable="false" class="chakra-icon css-6ey7w3" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a target="_blank" class="chakra-link css-r90sma" href="https://www.instagram.com/darmajr94?igsh=OGgwNTRnaGFxeTY1" aria-label="Visit my Instagram profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" focusable="false" class="chakra-icon css-6ey7w3" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg></a></div><style data-emotion="css 1af29ku">.css-1af29ku{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;color:var(--chakra-colors-gray-400);}@media screen and (min-width: 48em){.css-1af29ku{-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-order:1;-ms-flex-order:1;order:1;}}</style><div class="css-1af29ku"><style data-emotion="css 183sxnl">.css-183sxnl{font-size:base;}</style><p class="chakra-text css-183sxnl">© <!-- -->2025<!-- --> Barbarpotato. All rights reserved.</p></div></div></div></div></footer><span></span><span id="__chakra_env" hidden=""></span></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"blog_id":"0af995c6-3bd5-405a-ad71-6ebeaa675d38","title":"Building a Simple CQRS Pattern Architecture","short_description":"In this lab we will implement simple CQRS architecture pattern using apache kafka as a message broker, elastic search as a search service and mysql database as a command service.","description":"\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eThe\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eCommand Query Responsibility Segregation (CQRS)\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;pattern is an architectural pattern used to separate the\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ewrite\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;(commands) and\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eread\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;(queries) sides of an application. This separation ensures scalability, performance optimization, and flexibility, especially for systems with complex business logic.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eThis article explains how to design a\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003esimple CQRS pattern\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;and implement it in a practical example.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u003cimg src=\"https://firebasestorage.googleapis.com/v0/b/personal-blog-darmajr.appspot.com/o/blog-content%2Fcqrs.png?alt=media\u0026amp;token=6eab7b0b-37d8-49f2-9137-27dadd766c96\" alt=\"CQRS Basic Pattern\" width=\"720px\"\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eWhy Do We Need CQRS?\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eCQRS is designed to address challenges in systems where the\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eread\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;and\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ewrite\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;operations have distinct requirements. It is particularly helpful in large, complex applications with high performance, scalability, and maintainability needs. Here’s a breakdown of its importance:\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eHere’s a detailed explanation of\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ewhy we need CQRS (Command Query Responsibility Segregation)\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e:\u003c/span\u003e\u003c/p\u003e\u003ch3\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eSeparation of Concerns\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eIn traditional CRUD-based architectures, the same model is often used for both reading and writing data. This can lead to problems such as:\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e1.Bloated models trying to handle both reads and writes.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e2.Tight coupling between read and write logic, making it harder to change one without affecting the other.\u003c/span\u003e\u003c/p\u003e\u003ch3\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eOptimization of Reads and Writes\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eIn many applications, the requirements for\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ereading data\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;differ significantly from\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ewriting data\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e:\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003e1.Writes\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;may require strict validation, transactional consistency, and complex domain logic.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003e2.Reads\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;often focus on speed, scalability, and simplicity, potentially requiring optimized or denormalized views of data.\u003c/span\u003e\u003c/p\u003e\u003ch2\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ePre-requisites for this lab:\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eIn this article we will build simple cqrs architecture with apache kafka, elastic search, and the backend service (Express.js).\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;VM 1: Runs\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eApache Kafka\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;for handling messaging and event distribution.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;VM 2: Runs\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eElasticsearch\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;for read-optimized data storage and retrieval.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eExpress.js Services\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e:\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;A\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eCommand service\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;with an endpoint for inserting data into the system.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;A\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eQuery service\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;to retrieve data from Elasticsearch.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;Mysql Database that connected to Express.js service\u003c/span\u003e\u003c/p\u003e\u003ch2\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ePlanned Architecture\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u003cimg src=\"https://firebasestorage.googleapis.com/v0/b/personal-blog-darmajr.appspot.com/o/blog-content%2FCQRS.webp?alt=media\u0026amp;token=58c5dcef-485c-482d-8c6a-459473e51f04\" alt=\"Planned CQRS Architecture for this lab\" width=\"720px\"\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eThe architecture depicted in your diagram showcases a practical implementation of the CQRS (Command Query Responsibility Segregation) pattern using separate services and data stores for handling write and read operations. At its core, this design focuses on decoupling the responsibilities of updating and retrieving data, ensuring better scalability, performance, and maintainability.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eThe\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eCommand Service\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e, built with Express.js, serves as the entry point for handling all write operations. Whenever a client sends a request to add or update data, the Command Service writes the data to a MySQL database. This database acts as the system's primary source of truth, ensuring the durability and consistency of all data. Once the data is successfully persisted in MySQL, the Command Service publishes an event to the\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eMessage Broker\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e, implemented with Apache Kafka. The role of Kafka here is to act as an intermediary that reliably propagates changes across the system, enabling asynchronous communication between services.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eOn the other side of the architecture, a consumer service listens to the events broadcasted by Kafka. Whenever a new event is received, the consumer retrieves the relevant data from MySQL, transforms it if needed, and indexes it into an\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eElasticSearch instance\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e. ElasticSearch, being optimized for querying and search operations, ensures that data is structured for fast retrieval. This makes it the perfect choice for systems that need to handle complex queries or search-heavy workloads without compromising performance.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eThe\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eRead Service\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e, also built with Express.js, provides an API for retrieving data from ElasticSearch. By querying ElasticSearch directly, the Read Service delivers low-latency responses to clients, even under high query loads. This design ensures that the performance of the read operations does not interfere with or degrade the performance of write operations in the Command Service. The use of ElasticSearch also enables advanced search capabilities, such as full-text search, aggregations, and filtering, which are often slow or complex to implement in traditional relational databases.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eThis architecture embodies the essence of CQRS by segregating the responsibilities of writing and querying data into distinct paths. The Command Service and MySQL handle writes and ensure data consistency, while the Read Service and ElasticSearch are optimized for delivering fast and efficient queries. The inclusion of Kafka as a Message Broker enables asynchronous processing, allowing the system to remain responsive to client requests even when downstream systems take time to process data.\u003c/span\u003e\u003c/p\u003e\u003ch2\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eSetting Up Apache Kafka on Ubuntu Server:\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eIn this guide, I’ll walk you through setting up\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eApache Kafka\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;on an\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eUbuntu Server\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;running on a virtual machine. While you can certainly use Docker and Docker Compose for a Kafka setup, I decided to go the manual route to test the installation process. So, if you’re ready to roll up your sleeves, let’s dive in!\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 1: Install Java\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eKafka runs on the Java Virtual Machine (JVM), so the first step is to install Java. We’ll use OpenJDK 17 for this:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003esudo apt update\nsudo apt install openjdk-17-jdk -y\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eOnce installed, you can verify the version with:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ejava -version\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 2: Download Kafka\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eNext, we need to download the Kafka binaries. Use the following command to grab the latest Kafka release:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ewget https://downloads.apache.org/kafka/3.6.0/kafka_2.13-3.6.0.tgz\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eAfter downloading, extract the archive:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003etar -xvf kafka_2.13-3.6.0.tgz\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eNow, let’s move the extracted Kafka directory to\u0026nbsp;/opt for easier access:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003esudo mv kafka_2.13-3.6.0 /opt/kafka\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eFinally, navigate to the Kafka directory:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ecd /opt/kafka\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 3: Configure Kafka Server Properties\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eBefore we start Kafka, we need to tweak its configuration a bit. Open the\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eserver.properties\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;file with a text editor:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003enano config/server.properties\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eHere are a couple of key settings to look for:\u003c/span\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003elog.dirs: This is where Kafka will store its log files. You can set it to a directory of your choice.\u003c/span\u003e\u003c/li\u003e\u003cli\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003ezookeper.connect: Ensure this points to your ZooKeeper instance. If you’re running ZooKeeper locally, the default setting should work.\u003c/span\u003e\u003c/li\u003e\u003c/ul\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 4: Start ZooKeeper\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eKafka relies on\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eZooKeeper\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;to manage its metadata, so we’ll need to start ZooKeeper before starting Kafka. Use the following command to get ZooKeeper up and running:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ebin/zookeeper-server-start.sh config/zookeeper.properties\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eTo run ZooKeeper as a background process (so you can keep using your terminal), use this instead:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ebin/zookeeper-server-start.sh config/zookeeper.properties \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 \u0026amp;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 5: Start the Kafka Broker\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eNow that ZooKeeper is running, it’s time to fire up Kafka. Use this command to start the Kafka broker:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ebin/kafka-server-start.sh config/server.properties\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eOr, to run Kafka in the background:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ebin/kafka-server-start.sh config/server.properties \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 \u0026amp;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 6: Test Your Kafka Setup\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eCongratulations! Your Kafka instance is now up and running. Let’s do a quick test to ensure everything works as expected.\u003c/span\u003e\u003c/p\u003e\u003col\u003e\u003cli\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eCreate a Topic\u003c/strong\u003e\u003c/li\u003e\u003cli\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eKafka organizes messages into topics. Let’s create a topic named\u0026nbsp;test-topic:\u003c/span\u003e\u003c/li\u003e\u003c/ol\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ebin/kafka-topics.sh --create --topic test-topic --bootstrap-server localhost:9092 --partitions 1 --replication-factor 1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col\u003e\u003cli\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eList Topics\u003c/strong\u003e\u003c/li\u003e\u003cli\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eTo confirm that the topic was created, list all topics:\u003c/span\u003e\u003c/li\u003e\u003c/ol\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ebin/kafka-topics.sh --list --bootstrap-server localhost:9092\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col\u003e\u003cli\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStart a Producer\u003c/strong\u003e\u003c/li\u003e\u003cli\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eA producer sends messages to a Kafka topic. Start the producer for\u0026nbsp;test-topic:\u003c/span\u003e\u003c/li\u003e\u003c/ol\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ebin/kafka-console-producer.sh --topic test-topic --bootstrap-server localhost:9092\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col\u003e\u003cli\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eType a few messages in the terminal, and they’ll be sent to the topic.\u003c/span\u003e\u003c/li\u003e\u003cli\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStart a Consumer\u003c/strong\u003e\u003c/li\u003e\u003cli\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eA consumer reads messages from a topic. Start a consumer to read messages from\u0026nbsp;test-topic:\u003c/span\u003e\u003c/li\u003e\u003c/ol\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ebin/kafka-console-consumer.sh --topic test-topic --from-beginning --bootstrap-server localhost:9092\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col\u003e\u003cli\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eYou should see the messages you typed in the producer terminal appear here!\u003c/span\u003e\u003c/li\u003e\u003c/ol\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ePart 2: Installing Elasticsearch on a Virtual Machine\u003c/strong\u003e\u003c/h2\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 1: SSH into Your Server\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eConnect to your EC2 instance (or VM):\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003essh -i /path/to/your-key.pem ec2-user@your-ec2-public-ip\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 2: Install Java\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eElasticsearch also needs Java:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003esudo apt update\nsudo apt install -y openjdk-11-jdk\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 3: Install Elasticsearch\u003c/strong\u003e\u003c/h4\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ewget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -\nsudo apt install -y apt-transport-https\necho \"deb https://artifacts.elastic.co/packages/8.x/apt stable main\" | sudo tee -a /etc/apt/sources.list.d/elastic-8.x.list\n\nsudo apt update\n\nsudo apt install -y elasticsearch\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 4: Enable and Start Elasticsearch\u003c/strong\u003e\u003c/h4\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003esudo systemctl enable elasticsearch\nsudo systemctl start elasticsearch\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 5: Configure Elasticsearch for External Access\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eEdit the configuration:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003esudo nano /etc/elasticsearch/elasticsearch.yml\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eSet these properties:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003enetwork.host: 0.0.0.0\nhttp.port: 9200\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eRestart Elasticsearch:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003esudo systemctl restart elasticsearch\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eStep 6: Verify Elasticsearch\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eRun:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ecurl -X GET http://localhost:9200\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eYou should see a JSON response!\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ePart:3 Explanation of the Express.js POST Route for Inserting User Data and Sending to Kafka\u003c/strong\u003e\u003c/h2\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003eimport express from 'express';\nimport { Kafka } from 'kafkajs';\nimport mysql from 'mysql2/promise'; // MySQL client for Node.js\n\nconst app = express();\napp.use(express.json()); // Parse JSON request bodies\n\n// Kafka producer setup\nconst kafka = new Kafka({\n\u0026nbsp; \u0026nbsp; clientId: 'my-app',\n\u0026nbsp; \u0026nbsp; brokers: ['localhost:9092'], // Replace with your Kafka broker(s)\n});\n\nconst producer = kafka.producer();\n\n// Connect Kafka producer\nasync function connectProducer() {\n\u0026nbsp; \u0026nbsp; await producer.connect();\n}\n\nconnectProducer().catch(console.error);\n\n// MySQL database connection setup\nconst dbConfig = {\n\u0026nbsp; \u0026nbsp; host: 'localhost',\n\u0026nbsp; \u0026nbsp; user: 'root', // Replace with your MySQL username\n\u0026nbsp; \u0026nbsp; password: 'root', // Replace with your MySQL password\n\u0026nbsp; \u0026nbsp; database: 'user', // Replace with your database name\n};\n\nlet connection;\n\nasync function connectDatabase() {\n\u0026nbsp; \u0026nbsp; try {\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; connection = await mysql.createConnection(dbConfig);\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; console.log('Connected to MySQL database');\n\u0026nbsp; \u0026nbsp; } catch (error) {\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; console.error('Error connecting to MySQL:', error);\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; process.exit(1);\n\u0026nbsp; \u0026nbsp; }\n}\n\nconnectDatabase();\n\n// POST route to insert user data\napp.post('/users', async (req, res) =\u0026gt; {\n\u0026nbsp; \u0026nbsp; const userData = req.body;\n\n\u0026nbsp; \u0026nbsp; try {\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; // Insert data into MySQL database\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; const { name, email, password } = userData; // Assuming user data has 'name' and 'email' fields\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; const [result] = await connection.execute(\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; 'INSERT INTO user (username, email, password) VALUES (?, ?, ?)',\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; [name, email, password]\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; );\n\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; console.log('User inserted into database:', result);\n\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; // Send the user data to Kafka topic 'user-topic'\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; await producer.send({\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; topic: 'users-topic', // Replace with your topic\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; messages: [\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; { value: JSON.stringify(userData) },\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; ],\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; });\n\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; res.status(201).json({ message: 'User data inserted into database and sent to Kafka' });\n\u0026nbsp; \u0026nbsp; } catch (error) {\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; console.error('Error processing request:', error);\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; res.status(500).json({ message: 'Error processing request' });\n\u0026nbsp; \u0026nbsp; }\n});\n\n// Start Express server\napp.listen(3000, () =\u0026gt; {\n\u0026nbsp; \u0026nbsp; console.log('Server running on http://localhost:3000');\n});\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eIn the given code snippet, an Express.js route (/users) is created to handle\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ePOST requests\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e. This route processes user data by first saving it into a MySQL database and then sending the same data to a Kafka topic. Below is a step-by-step explanation of how this route works:\u003c/span\u003e\u003c/p\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003e1.\u0026nbsp;Endpoint Definition and Request Handling\u003c/strong\u003e\u003c/h4\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003eThe app.post('/users', async (req, res) defines a route that listens for POST requests at the /users endpoint. It uses async/await to handle asynchronous operations such as database insertion and Kafka messaging. The req.body object is used to extract the data sent by the client in the request payload.const userData = req.body;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eThe\u0026nbsp;userData object contains the user-provided information, typically in JSON format. For example, it might include fields like\u0026nbsp;name. email and password.\u003c/span\u003e\u003c/p\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003e2.\u0026nbsp;Inserting User Data into MySQL\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eTo store user data, the route uses a prepared SQL statement to prevent\u0026nbsp;\u003c/span\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eSQL injection attacks\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e. The\u0026nbsp;\u003c/span\u003econnection.execute()\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e\u0026nbsp;function interacts with the database, where\u0026nbsp;name, email and passwords fields are inserted into a\u0026nbsp;user table.\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003econst [result] = await connection.execute(\n    'INSERT INTO user (username, email, password) VALUES (?, ?, ?)',\n    [name, email, password]\n);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\u003cli\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ePrepared Statement\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e: The\u0026nbsp;? placeholders in the SQL query are replaced with actual values (name, email, password) safely.\u003c/span\u003e\u003c/li\u003e\u003cli\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eDeconstructed User Data\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e: The\u0026nbsp;name,\u0026nbsp;email, and\u0026nbsp;password fields are extracted from the\u0026nbsp;userData object for better readability and security.\u003c/span\u003e\u003c/li\u003e\u003cli\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eResult\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e: The\u0026nbsp;connection.execite()\u0026nbsp;method returns an array, where\u0026nbsp;result contains metadata about the operation, such as the number of rows affected.\u003c/span\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eIf the operation succeeds, a log is generated to confirm that the user data was inserted into the database:\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003econsole.log('User inserted into database:', result);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003e3.\u0026nbsp;Sending Data to a Kafka Topic\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eAfter successfully storing the data in MySQL, the route sends the same data to a Kafka topic for further processing. Kafka is often used to handle large-scale distributed messaging and stream processing.\u003c/span\u003e\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003eawait producer.send({\n    topic: 'users-topic', // Replace with your topic\n    messages: [\n        { value: JSON.stringify(userData) },\n    ],\n});\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\u003cli\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eKafka Producer\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003ep: The producer object is an instance of Kafka's producer client, which is responsible for sending messages to Kafka topics.\u003c/span\u003e\u003c/li\u003e\u003cli\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eTopic Name\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e: The\u0026nbsp;topic field specifies the destination Kafka topic (user-topic in this case). This is where the message will be sent for further processing by Kafka consumers.\u003c/span\u003e\u003c/li\u003e\u003cli\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003eMessage Payload\u003c/strong\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003e: The\u0026nbsp;message array contains the data to be sent. Each message is an object with a\u0026nbsp;value field, which holds the serialized user data (converted to JSON using\u0026nbsp;JSON.stringfy(userData)).\u003c/span\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eThis mechanism ensures that user data is available for other systems (e.g., analytics, logging, or notifications) in near real-time.\u003c/span\u003e\u003c/p\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003e4.\u0026nbsp;Response to the Client\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eIf both the database insertion and Kafka message-sending steps succeed, the server sends a 201 Created response to the client with a success message:\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003eres.status(201).json({ message: 'User data inserted into database and sent to Kafka' });\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThe 201 status code indicates that the request was successfully processed and a new resource was created.\u003c/p\u003e\u003ch4\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003e5.\u0026nbsp;Error Handling\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eThe try-catch block ensures that errors during either database insertion or Kafka messaging are gracefully handled. If an error occurs, it is logged for debugging purposes, and the client receives a 500 Internal Server Error response:\u003c/p\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003ecatch (error) {\n    console.error('Error processing request:', error);\n    res.status(500).json({ message: 'Error processing request' });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eThis approach provides transparency to developers and prevents the application from crashing due to unhandled exceptions.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cp\u003e\u003cspan style=\"color: rgb(255, 255, 255);\"\u003eAfter building the express.js service to insert data in mysql database and message broker. we will create the instance that listening on this producer.\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003ch2\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ePart 4: Explanation of Kafka Consumer with Elasticsearch Integration\u003c/strong\u003e\u003c/h2\u003e\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003eimport { Kafka } from 'kafkajs';\nimport { Client } from '@elastic/elasticsearch';\n\n// Kafka consumer setup\nconst kafka = new Kafka({\n\u0026nbsp; \u0026nbsp; clientId: 'express-app',\n\u0026nbsp; \u0026nbsp; brokers: ['192.168.128.207:9092'], // Replace with your Kafka broker(s)\n});\n\nconst consumer = kafka.consumer({ groupId: 'user-group' });\n\n// Elasticsearch client setup\nconst esClient = new Client({\n\u0026nbsp; \u0026nbsp; node: 'http://localhost:9200', // Replace with your Elasticsearch URL\n});\n\n// Kafka consumer processing\nasync function consumeMessages() {\n\u0026nbsp; \u0026nbsp; await consumer.connect();\n\u0026nbsp; \u0026nbsp; await consumer.subscribe({ topic: 'users-topic', fromBeginning: true }); // Replace with your topic\n\n\u0026nbsp; \u0026nbsp; await consumer.run({\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; eachMessage: async ({ topic, partition, message }) =\u0026gt; {\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; const userData = JSON.parse(message.value.toString());\n\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; // Insert data into Elasticsearch\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; try {\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; const response = await esClient.index({\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; index: 'users', // The Elasticsearch index to use\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; id: message.name,\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; document: userData,\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; });\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; console.log('User data inserted into Elasticsearch:', response);\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; } catch (error) {\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; console.error('Error inserting data into Elasticsearch:', error);\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; }\n\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; },\n\u0026nbsp; \u0026nbsp; });\n}\n\nconsumeMessages().catch(console.error);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThis code demonstrates how to integrate Kafka as a messaging system and Elasticsearch as a search and data indexing tool in a Node.js application. The overall flow involves consuming messages from a Kafka topic and then indexing the received data into Elasticsearch for further use, such as querying or searching.\u003c/p\u003e\u003cp\u003eTo start, the script imports two essential libraries: KafkaJS and Elasticsearch client. KafkaJS is a JavaScript library used for interacting with Kafka, which is a distributed streaming platform. The Kafka client allows you to create consumers that can listen to Kafka topics and process the messages in real time. On the other hand, the Elasticsearch client facilitates communication with an Elasticsearch cluster, enabling the ability to store and index documents, which can later be queried or analyzed.\u003c/p\u003e\u003cp\u003eThe Kafka consumer is set up by first initializing the Kafka client with a unique clientId (express-app) and specifying the Kafka brokers. These brokers are the Kafka servers where the consumer will connect. The consumer is created with a groupId, which is user-group in this case. The group ID helps manage message consumption across multiple instances of the consumer. When consumers with the same group ID listen to a Kafka topic, Kafka ensures that each partition of the topic is assigned to only one consumer in the group, effectively balancing the load.\u003c/p\u003e\u003cp\u003eNext, the code sets up the Elasticsearch client by specifying the address of the Elasticsearch node (http://localhost:9200). This client will be used to interact with the Elasticsearch service where the user data will be indexed. Elasticsearch is widely used for its powerful search and analytics capabilities, which can handle large volumes of data and provide fast search results.\u003c/p\u003e\u003cp\u003eOnce both Kafka and Elasticsearch clients are set up, the consumeMessages() function is created to handle the actual logic of consuming messages from Kafka. This function first connects to the Kafka cluster and subscribes to the users-topic. By subscribing to the topic, the consumer listens for new messages that are published to that topic. The fromBeginning: true option ensures that the consumer starts processing messages from the very beginning of the topic’s log, meaning it will consume all the messages from when it first subscribes, not just new messages that arrive after it subscribes.\u003c/p\u003e\u003cp\u003eThe function then uses consumer.run() to begin consuming messages. Each message from the Kafka topic is processed in the eachMessage callback function. Inside this function, the message's value is parsed from a buffer into a JavaScript object (since Kafka messages are typically sent as binary data). The parsed data, which represents user information in this case, is then indexed into Elasticsearch. The esClient.index() method is used to insert this data into the users index in Elasticsearch. A unique identifier for the document is generated using the message's name field. This id ensures that each document in Elasticsearch can be uniquely identified.\u003c/p\u003e\u003cp\u003eIf the data insertion into Elasticsearch is successful, a response from Elasticsearch is logged to the console, confirming that the user data has been indexed. If an error occurs while inserting the data, the error is caught and logged.\u003c/p\u003e\u003cp\u003eFinally, the consumeMessages() function is invoked, and any unhandled errors are caught by console.error() to prevent the application from crashing. This ensures that the consumer will keep running and processing messages as they arrive, continuously feeding new data into Elasticsearch for indexing.\u003c/p\u003e\u003ch2\u003e\u003cstrong style=\"color: rgb(255, 255, 255);\"\u003ePart 5: Wrapup what we have been doing\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eThe architecture discussed in this article aligns well with the CQRS (Command Query Responsibility Segregation) pattern, which is a powerful design pattern that separates the logic of reading data (queries) from the logic of writing data (commands). By implementing Kafka and Elasticsearch in conjunction with MySQL and Express.js, we create a robust system that effectively adheres to the principles of CQRS.\u003c/p\u003e\u003cp\u003eIn this architecture, the write operations (commands) are handled by the /users POST route in the Express.js service. When user data is received, it's inserted into the MySQL database and sent to Kafka. Kafka acts as the message bus, decoupling the data-writing process from the read operations and ensuring that data can be asynchronously processed and consumed by different systems or services.\u003c/p\u003e\u003cp\u003eThe read operations (queries) are efficiently handled by Elasticsearch. After the data is consumed from Kafka and indexed into Elasticsearch, it becomes readily available for fast and scalable querying. Elasticsearch's ability to index and search large volumes of data makes it an excellent fit for handling query-based operations in this architecture.\u003c/p\u003e\u003cp\u003eBy using CQRS, we ensure that the system is optimized for both reading and writing operations, enabling high scalability and responsiveness. Kafka, as the message broker, enables asynchronous communication and allows for horizontal scaling in the system. Meanwhile, Elasticsearch ensures that queries on user data are fast, efficient, and scalable.\u003c/p\u003e\u003cp\u003eThis CQRS-based approach also helps with performance optimization, as read and write concerns are handled separately. It allows for the scaling of each part of the system independently, depending on whether there is a higher load on reading or writing. The separation of concerns promotes better maintainability, flexibility, and scalability, making this architecture ideal for modern, high-traffic applications requiring real-time data processing and analytics.\u003c/p\u003e\u003cp\u003eIn conclusion, by integrating Kafka, Elasticsearch, and Express.js with a CQRS approach, this system architecture offers a scalable, maintainable, and highly performant solution for handling real-time data in applications where reading and writing data need to be optimized separately.\u003c/p\u003e","timestamp":"Saturday, December 7, 2024 at 9:06:28 AM GMT+8","image":"https://firebasestorage.googleapis.com/v0/b/personal-blog-darmajr.appspot.com/o/blog-content%2Fcqrs-background-title.png?alt=media\u0026token=dd34dffa-1cc4-4b14-b4e2-f6840555b0e4","image_alt":"Image cover of CQRS Architecture","slug":"building-a-simple-cqrs-pattern-architecture","index":"6b86b273ff34f","tags":["SQL","Backend","System Design","Software Architecture","API"]},"recommendedPosts":[{"blog_id":"36855ea7-b37b-4b4c-91f1-27d90b9bde59","title":"Understanding Database Partitioning vs Sharding: Concepts, Benefits, and Challenges","short_description":"When dealing with large volumes of data, efficient database management becomes essential. Two widely used techniques to improve performance and scalability are database partitioning and database sharding. Although often confused, these approaches differ fundamentally in architecture, complexity, and suitable use cases. This article explores these differences in detail, helping you decide which fits your application best.","timestamp":"2025-05-17 09:42:15","image":"https://storage.googleapis.com/personal-blog-darmajr.appspot.com/blog-content/1747474398774_partition%20vs%20sharding%20db.png","image_alt":"partition vs sharding Database","slug":"Understanding-Database-Partitioning-vs-Sharding-Concepts-Benefits-and-Challenges","index":"d4735e3a265e1","tags":["Database","Database Architecture","Software Architecture","System Design"]},{"blog_id":"675f800c-08cb-459f-aa7d-44cdc9c9c169","title":"System Design Simplified: The Trade-Off Triangle You Must Master","short_description":"Behind every well-architected system is a set of tough decisions. The CAP Theorem simplifies those decisions by showing you what you must give up to keep your system fast, correct, and resilient. Learn how to apply this in real-world architecture.","timestamp":"2025-05-13 01:58:48","image":"https://storage.googleapis.com/personal-blog-darmajr.appspot.com/blog-content/1747100859417_CAP%20BG.jpg","image_alt":"CAP background","slug":"System-Design-Simplified-The-Trade-Off-Triangle-You-Must-Master","index":"d4735e3a265e1","tags":["System Design","CAP Theorem","Distributed Systems"]},{"blog_id":"5c2626c4-8a10-47f1-8c5c-b3ac2d84b69a","title":"Why Domain-Driven Design (DDD) Matters: From Chaos to Clarity in Complex Systems","short_description":"Domain-Driven Design (DDD) is a powerful approach to software development that places the business domain—not the technology—at the center of your design decisions. First introduced by Eric Evans, DDD is essential for developers and architects who want to build systems that reflect real-world complexity and change.","timestamp":"2025-05-12 04:23:04","image":"https://storage.googleapis.com/personal-blog-darmajr.appspot.com/blog-content/1747022797381_Domain-Driven-Design_cover.jpg","image_alt":"DDD Cover","slug":"Why-Domain-Driven-Design-DDD-Matters-From-Chaos-to-Clarity-in-Complex-Systems","index":"d4735e3a265e1","tags":["DDD","Software Architecture","System Design"]}]},"__N_SSG":true},"page":"/[slug]","query":{"slug":"building-a-simple-cqrs-pattern-architecture"},"buildId":"ueq4AGs-hW0ySdlZenHDR","assetPrefix":"/Labs-6b86b273ff34f","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>